<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>BPI-R3mini ä»å…¥é—¨åˆ°å…¥åœŸ</title>
    <url>/2024/12/01/BPI-R3mini-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä»Šå¹´æ—©äº›æ—¶å€™å…¥æ‰‹äº†å·¡å¤©AX3000Pro+ï¼Œæœ¬ä»¥ä¸ºå¯ä»¥ä¸€æ­¥åˆ°ä½ï¼Œç»“æœå‘ç°å®ƒæ²¡æ³•åˆ·OpenWrtï¼Œæ— æ³•é…ç½®DHCPåˆ†é…å›ºå®šIPä»¥åŠé…ç½®DNSè§£æï¼Œä½¿çš„æˆ‘åªèƒ½ä½¿ç”¨IPæ¥è®¿é—®å†…ç½‘è®¾å¤‡ï¼Œè®¾å¤‡IPç”šè‡³è¿˜ä¼šä¸åœçš„å˜ï¼Œä¹°ä¹‹å‰è¿˜æ˜¯åŠŸè¯¾åšå°‘äº†å•Šã€‚æ‰€ä»¥åˆçœ‹äº†ä¸€åœˆï¼Œç›¸ä¸­äº†BPI-R3miniï¼Œè™½ç„¶æœ‰ç‚¹è´µï¼Œä½†é‰´äºæˆ‘å–œæ¬¢æŠ˜è…¾ï¼Œä¸”BPI-R3miniæœ‰å®˜æ–¹æä¾›OpenWrté•œåƒæ”¯æŒï¼Œå°±å’¬ç‰™å…¥æ‰‹äº†ã€‚</p>
<hr>
<h2 id="ç¡¬ä»¶ç»„è£…"><a href="#ç¡¬ä»¶ç»„è£…" class="headerlink" title="ç¡¬ä»¶ç»„è£…"></a>ç¡¬ä»¶ç»„è£…</h2><p>åˆ°æ‰‹åçš„ä¸œè¥¿å¦‚ä¸‹ï¼š</p>
<img src="/2024/12/01/BPI-R3mini-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/image20241201141956.jpg" class="">
<p>å®‰è£…æ–¹æ³•å‚è€ƒï¼š<a href="https://www.bilibili.com/video/BV1XM411D7hm">Banana Pi BPI-R3 Mini è¿·ä½ å¼€æºè·¯ç”±å™¨å¼€å‘æ¿å¤–å£³å®‰è£…æ•™å­¦è§†é¢‘</a></p>
<p>ç»„è£…å®Œçš„æ•ˆæœé•¿è¿™æ ·ï¼š</p>
<img src="/2024/12/01/BPI-R3mini-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/image20241201150613.jpg" class="">
<img src="/2024/12/01/BPI-R3mini-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/image20241201151724.jpg" class="">
<p>BPI-R3miniæœ‰ä¸¤ç§å¯åŠ¨æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ä»Nandå¯åŠ¨å’Œä»eMMCå¯åŠ¨ï¼Œä¸€èˆ¬æ¥è¯´æ˜¯æŠŠNandå½“æˆå¤–æ’SDå¡ï¼Œæ‰€ä»¥Nandå¯åŠ¨ä¸€èˆ¬åªæ˜¯ç”¨æ¥åšç‰¹æ®Šæ“ä½œæ—¶å€™ç”¨ï¼Œæ¯”å¦‚æ‰‹åŠ¨æ›´æ–°eMMCé‡Œçš„é•œåƒçš„æ—¶å€™ã€‚åˆ‡æ¢æ–¹å¼æ˜¯æ‹¨åŠ¨æ¿ä¸Šé¢çš„ä¸€ä¸ªå¼€å…³ï¼š</p>
<img src="/2024/12/01/BPI-R3mini-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/image20241201163809.jpg" class="">
<p>å› ä¸ºeMMCå’ŒNandé‡Œé¢æ­£å¸¸éƒ½æ˜¯é»˜è®¤è£…æœ‰é•œåƒçš„ï¼Œæ‰€ä»¥åªç”¨æŠŠå¼€å…³è°ƒåˆ°å·¦è¾¹eMMCä½ç½®å†é€šç”µå¯åŠ¨å°±å¥½ï¼ˆä¸å›¾ä¸­ç›¸åï¼‰ã€‚å¦‚æœæ²¡æœ‰çš„è¯è¯·å‚è€ƒå®˜æ–¹Wikiçš„<a href="https://wiki.banana-pi.org/Getting_Started_with_BPI-R3_MINI#Warnning">é•œåƒçƒ§å½•æ‰‹å†Œ</a></p>
<p>è£…å¥½é€šä¸Šç”µåï¼Œé£æ‰‡å°±å¼€å§‹è½¬äº†ï¼Œé»˜è®¤é•œåƒé‡Œæœ‰é…ç½®é£æ‰‡PWM (Pulse Width Modulation&#x2F;è„‰å®½è°ƒåˆ¶)ï¼Œæ‰€ä»¥ä¸ç”¨å†åšå…¶å®ƒä¿®æ”¹ï¼Œå¦‚æœè¦ä¿®æ”¹çš„è¯å¯å‚è€ƒWikiï¼š<a href="https://wiki.banana-pi.org/Getting_Started_with_BPI-R3_MINI#FAN">PWM FAN Control</a></p>
<p>ä¸å¾—ä¸è¯´è¿™ç©æ„å‘çƒ­é‡è¿˜æ˜¯æœ‰ç‚¹å¤§çš„ï¼Œéš¾æ€ªè¦æ•´æˆå…¨é‡‘å±çš„å¤–å£³ï¼Œåªè¦å®ƒåœ¨è·‘ï¼Œé‚£é‡‘å±å¤–å£³å°±çƒ«æ‰‹ã€‚é£æ‰‡æ•ˆæœå¤§ä¸å¤§ï¼Œä¸å¥½è¯´ï¼Œæ²¡æ„Ÿå—åˆ°è¿™å°é£æ‰‡çš„ä½œç”¨ã€‚</p>
<h2 id="è½¯ä»¶é…ç½®"><a href="#è½¯ä»¶é…ç½®" class="headerlink" title="è½¯ä»¶é…ç½®"></a>è½¯ä»¶é…ç½®</h2><p>é€šè¿‡eMMCå¯åŠ¨ï¼Œé‡Œé¢é»˜è®¤é…ç½®äº†WiFiï¼Œåˆ†åˆ«æ˜¯<code>MTK_MT7986_AP_AX4200_5G</code>å’Œ<code>MTK_MT7986_AP_AX4200_2.4G</code>ï¼Œç›´æ¥è¿ä¸Šï¼Œè®¿é—®é»˜è®¤ç½‘å…³<code>192.168.1.1</code>ï¼Œé»˜è®¤å¯†ç æ˜¯<code>bananapi</code>ï¼Œç™»å½•æˆåŠŸåç•Œé¢å¦‚ä¸‹å›¾ï¼š</p>
<img src="/2024/12/01/BPI-R3mini-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/image20241201170323.jpg" class="">
<p>åœ¨<code>System-&gt;Aministration</code>ä¸‹å¯ä»¥ä¿®æ”¹ç½‘å…³å¯†ç ï¼Œåœ¨<code>MTK-&gt;WiFi configuration</code>ä¸‹å¯ä»¥ä¿®æ”¹WiFiçš„SSIDä»¥åŠæ·»åŠ WiFiå¯†ç ï¼Œä¸‹å›¾æ˜¯WiFié…ç½®é¡µï¼š</p>
<img src="/2024/12/01/BPI-R3mini-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/image20241201170839.jpg" class="">
<p>å¯é…ç½®çš„ä¸œè¥¿æœ‰ä¸å°‘ï¼Œæˆ‘è¿™åªè¦åŠ ä¸ªWiFiå¯†ç æ”¹ä¸ªWiFiåå°±å¤Ÿç”¨äº†ã€‚</p>
<p>å¦å¤–å®ƒè¿˜èƒ½é…ç½®è®¸å¤šæœ‰ç”¨çš„å·¥å…·ï¼Œæ¯”å¦‚Xrayç­‰ã€‚å¯ä»¥åœ¨<code>System-&gt;Software-&gt;Installed</code>ä¸‹çœ‹åˆ°å·²ç»å®‰è£…çš„è½¯ä»¶åŒ…ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™é‡Œå®‰è£…æ–°çš„è½¯ä»¶åŒ…ï¼š</p>
<img src="/2024/12/01/BPI-R3mini-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/image20241201172503.jpg" class="">
<p>å¯ç©æ€§è¿˜æ˜¯å¾ˆé«˜çš„ï¼Œåªæ˜¯å¯é€‰çš„åŒ…ä¼¼ä¹ä¸æ˜¯å¾ˆå¤šï¼Œå¤§æ¦‚æ˜¯å› ä¸ºè¿™ç©æ„ç”¨çš„äººå°‘å§ã€‚</p>
<h2 id="ä½¿ç”¨SSHè¿œç¨‹è®¿é—®"><a href="#ä½¿ç”¨SSHè¿œç¨‹è®¿é—®" class="headerlink" title="ä½¿ç”¨SSHè¿œç¨‹è®¿é—®"></a>ä½¿ç”¨SSHè¿œç¨‹è®¿é—®</h2><p>BPI-R3minié»˜è®¤æœ‰å¯ç”¨SSH Serverï¼ˆ<a href="https://github.com/mkj/dropbear">Dropbear SSH</a>ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡SSHè¿ä¸Šå»ï¼Œä½¿ç”¨ä¹‹å‰é…ç½®çš„å¯†ç ï¼Œæˆ–è€…æ˜¯åœ¨<code>System-&gt;Aministration</code>é…ç½®SSHå…¬é’¥ã€‚è¿ä¸ŠåæŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ï¼š</p>
<img src="/2024/12/01/BPI-R3mini-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/image20241201173627.jpg" class="">
<p>é‡Œé¢ç”¨çš„åŒ…ç®¡ç†å™¨æ˜¯<code>opkg</code>ï¼Œå®˜æ–¹ä»‹ç»åœ¨<a href="https://openwrt.org/docs/guide-user/additional-software/opkg">è¿™é‡Œ</a>ï¼Œæ¯”èµ·å¸¸è§çš„<code>apt</code>, <code>pacman</code>è¿˜æ˜¯æœ‰ç‚¹ä¸å¤ªå¥½ä½¿ã€‚</p>
<p>å¯ä»¥åœ¨<code>/etc/opkg.conf</code>é‡Œç»™<code>opkg</code>é…ç½®ä»£ç†ï¼Œæ‰§è¡Œ<code>vim /etc/opkg.conf</code>åœ¨æ–‡ä»¶æœ«æ·»åŠ ä¸‹é¢ä¸¤è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">option http_proxy http://your.proxy.server:port</span><br><span class="line">option https_proxy https://your.proxy.server:port</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ç«¯å£æ‰«æå¯ä»¥çœ‹åˆ°å®ƒé»˜è®¤å¼€äº†445ç«¯å£ï¼Œä¹Ÿå°±æ˜¯SMBæœåŠ¡ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨Windowsè®¿é—®å®ƒçš„å…±äº«ç›®å½•ï¼š</p>
<img src="/2024/12/01/BPI-R3mini-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/image20241201175737.jpg" class="">
<img src="/2024/12/01/BPI-R3mini-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/image20241201175803.jpg" class="">
<p>ä¹Ÿå°±æ˜¯è¯´å¯ä»¥æŠŠå®ƒå½“æˆä¸€ä¸ªå°NASæ¥ç”¨ï¼Œä½†è¿™é»˜è®¤é…ç½®ä¼¼ä¹æ˜¯åªè¯»çš„ï¼ˆä¹Ÿå¯èƒ½æ˜¯æˆ‘ç™»å½•ç”¨æˆ·çš„åŸå› ï¼‰ï¼Œæ‰€ä»¥æƒ³å¾€é‡Œæ”¾ä¸œè¥¿çš„è¯è¿˜å¾—å†é…ç½®ä¸€ä¸‹ï¼Œæˆ‘è¿™é‡Œè¿˜æ²¡ç”¨åˆ°è¿™åŠŸèƒ½å°±ä¸è¯¦è¯´äº†ã€‚ä¸è¿‡æœ‰ä»¶äº‹ä¸å¾—ä¸æï¼Œæˆ‘ä¸“é—¨ä¹°äº†ä¸ªç¾å…‰P310 2230 SSDï¼Œ2Tï¼Œç»“æœæ’ä¸Šåå®ƒæ— æ³•è¯†åˆ«ï¼ˆå¯ä»¥é€šè¿‡<code>fdisk -l</code>çœ‹åˆ°å®ƒçš„ä¿¡æ¯ï¼Œä½†è¿™ä¿¡æ¯é‡Œçš„è®¾å¤‡è·¯å¾„äº‹å®ä¸Šä¸å­˜åœ¨ï¼Œä¹Ÿå°±æŒ‚è½½ä¸äº†ï¼‰ï¼Œæ˜¯å› ä¸º2Tå®¹é‡å¤ªå¤§äº†è¿˜æ˜¯é©±åŠ¨å•¥çš„é—®é¢˜ï¼Œè¿˜æ²¡æ•´æ˜ç™½ã€‚</p>
<p>è¿™ç©æ„ä¼¼ä¹å¹¶ä¸èƒ½æ¡¥æ¥WiFiï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½å½“æˆ‘çš„æ‰‹æœºçƒ­ç‚¹ä¿¡å·ä¸­ç»§æ”¾å¤§å™¨ï¼Œå› ä¸ºå®ƒä¼¼ä¹ä¸æ”¯æŒä½œä¸ºAP Clientå»è¿WiFiï¼š</p>
<img src="/2024/12/01/BPI-R3mini-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/image20241201181736.jpg" class="">
<p>è¿™ç‚¹æˆ‘çš„å·¡å¤©éƒ½å¯ä»¥åšåˆ°ã€‚æ˜¯æˆ‘çš„æ“ä½œæœ‰é—®é¢˜ï¼Ÿè¿˜æ˜¯å°‘äº†ä»€ä¹ˆé©±åŠ¨å•¥çš„ï¼Ÿè¿™å·²ç»åˆ°æˆ‘çš„çŸ¥è¯†ç›²åŒºäº†ï¼Œä¹Ÿæ‰¾ä¸ç€ç›¸å…³èµ„æ–™ğŸ˜”ã€‚</p>
<hr>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>ä½œä¸ºä¸€ä¸ªè½¯è·¯ç”±å®ƒè¿˜æ˜¯åˆæ ¼çš„ï¼Œå¦å¤–æˆ‘å‡†å¤‡ç»™å®ƒå®‰ä¸Š5Gæ¨¡å—ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥æ’SIMå¡è¿ç½‘ï¼Œä¸ç”¨å†æ‹¿æ‰‹æœºå½“çƒ­ç‚¹äº†ï¼Œå¦‚æœèƒ½å†æŠŠNASåŠŸèƒ½ï¼ŒXrayé…ç½®å¥½çš„è¯ï¼Œå°±ç®—å¤§åŠŸå‘Šæˆï¼Œè¿™æ ·å®ƒå°±èƒ½å®Œå…¨é¡¶æ›¿æˆ‘çš„å·¡å¤©äº†ã€‚æ‰€ä»¥ä¹‹ååº”è¯¥è¿˜ä¼šè®°å½•å®‰è£…è¿™äº›åŠŸèƒ½çš„è¿‡ç¨‹å’Œæ•ˆæœï¼Œè¿™æ ·å°±å¯ä»¥å†æ°´ä¸€ç¯‡åšå®¢äº†ğŸ˜†ã€‚</p>
<h2 id="å‚è€ƒ-x2F-å¼•ç”¨"><a href="#å‚è€ƒ-x2F-å¼•ç”¨" class="headerlink" title="å‚è€ƒ&#x2F;å¼•ç”¨"></a>å‚è€ƒ&#x2F;å¼•ç”¨</h2><ol>
<li><a href="https://wiki.banana-pi.org/Getting_Started_with_BPI-R3_MINI">Getting Started with BPI-R3 MINI</a></li>
<li><a href="https://wiki.banana-pi.org/Banana_Pi_BPI-R3_Mini">Banana Pi BPI-R3 Mini</a></li>
<li><a href="https://www.bilibili.com/video/BV1XM411D7hm?spm_id_from=333.880.my_history.page.click">Banana Pi BPI-R3 Mini è¿·ä½ å¼€æºè·¯ç”±å™¨å¼€å‘æ¿å¤–å£³å®‰è£…æ•™å­¦è§†é¢‘</a>]</li>
</ol>
]]></content>
      <tags>
        <tag>Tech</tag>
        <tag>WiFi</tag>
        <tag>OpenWrt</tag>
        <tag>Single-Board</tag>
        <tag>Router</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Implementing An Simple IRC Bot Using Python</title>
    <url>/2024/11/22/Implementing-An-Simple-IRC-Bot-Using-Python/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘ç”¨å›½è¡¥ä¹°äº†å°MiniPCï¼Œæ•´äº†ä¸ªPVEä¸¢å®¶é‡Œå½“å°æœåŠ¡å™¨ä½¿ï¼Œåœ¨ä¸Šé¢è·‘äº†å‡ ä¸ªdockeræœåŠ¡ï¼Œä»¥åŠollamaï¼Œ8854H + 32g å†…å­˜è·‘<code>llama3.1</code>åŸºæœ¬æ²¡æœ‰å‹åŠ›ã€‚ç”±äºå¹³æ—¶ä¸Šç­ä¸åœ¨å®¶ï¼Œä¹Ÿå°±æœ‰äº†è¿œç¨‹ç®¡ç†è¿™MiniPCçš„æƒ³æ³•ï¼Œæ­£å¥½ä»¥å‰çæ•´çš„IRCæœåŠ¡å™¨SSLè¯ä¹¦è¿‡æœŸæé†’äº†æˆ‘ï¼Œä»¥åŠæœ€è¿‘åœ¨æ•´äº›Pythonè„šæœ¬ï¼Œäºæ˜¯å°±æœ‰äº†ç°åœ¨è¿™ä¸ªé¡¹ç›®ï¼š</p>
<p><a href="https://github.com/qspidy/albot"><strong>Pythonå®ç°ç®€å•IRCèŠå¤©æœºå™¨äºº(A Simple IRC BOT Written in Python)</strong></a></p>
<hr>
<h2 id="å…³äºIRC-Python"><a href="#å…³äºIRC-Python" class="headerlink" title="å…³äºIRC + Python"></a>å…³äºIRC + Python</h2><p>ä½œä¸ºä¸€åå‘½ä»¤è¡Œçˆ±å¥½è€…ï¼Œæˆ‘æ›¾è¯•å›¾ä½¿ç”¨å‘½ä»¤è¡Œå®ç°æ‰€æœ‰æˆ‘åœ¨ç”µè„‘ä¸Šè¦åšçš„äº‹ï¼Œæ¯”å¦‚ä¾¿æ·çš„æµè§ˆæ–‡ä»¶ã€å¤šç»ˆç«¯åŒæ—¶è¿è¡Œã€æµè§ˆç½‘é¡µã€ä½œä¸ºIDEå†™ä»£ç å’Œå³æ—¶é€šè®¯ç­‰ï¼Œäºæ˜¯å°±æ‰¾åˆ°äº†<code>ranger</code>ã€<code>tmux</code>ã€<code>w3m</code>ã€<code>NvChad</code>å’Œ<code>Irssi</code>ç­‰ä¼˜ç§€çš„å¼€æºå·¥å…·ã€‚</p>
<p>å…¶ä¸­IRCç»ˆç«¯å®¢æˆ·ç«¯<code>Irssi</code>æ˜¯æˆ‘å…¥é—¨ç»ˆç«¯èŠå¤©çš„å·¥å…·ï¼Œè®©æˆ‘å¯¹è¿™ä¸ªå¤è€åˆç›¸å¯¹ç®€æ´çš„é€šè®¯åè®®äº§ç”Ÿäº†å…´è¶£ï¼Œ<strong>æ˜¯æ—¶å€™åŸºäºå®ƒåšç‚¹æœ‰æ„æ€çš„äº‹äº†</strong>ã€‚</p>
<p>è‡³äºPythonï¼Œä¼—æ‰€å‘¨çŸ¥ï¼šäººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Pythonã€‚å¦‚æœåç»­å¯¹æ€§èƒ½æœ‰éœ€æ±‚ï¼Œå†ç”¨Goé‡æ„å§ã€‚</p>
<h2 id="Albot"><a href="#Albot" class="headerlink" title="Albot"></a>Albot</h2><p>æˆ‘ç»™è¿™èŠå¤©æœºå™¨äººå–åAlbotï¼Œä¸æ˜¯AIï¼Œä¼¼æ˜¯AIã€‚å®ƒå®ç°çš„åŠŸèƒ½æœ‰ï¼š</p>
<ul>
<li>ä»åå°<code>ollama</code>æ¥å£ç”ŸæˆAIå›å¤</li>
<li>é’ˆå¯¹ä¸åŒçš„å…³é”®å­—è§¦å‘ä¸åŒçš„å“åº”ï¼Œæ¯”å¦‚æ”¶åˆ°<code>bilibili</code>ååœ¨æœåŠ¡å™¨åå°æ‰§è¡Œç›¸åº”çš„è„šæœ¬</li>
<li>åŒæ—¶å“åº”å¤šä¸ªè¯·æ±‚ï¼Œå³åŒæ—¶ä¸å¤šä¸ªå¯¹è±¡ï¼Œåœ¨ä¸åŒé¢‘é“ä¸­èŠå¤©å¯¹è¯</li>
</ul>
<p>é€šè¿‡è®¾è®¡ä¸åŒçš„å…³é”®å­—å’Œå®ç°ä¸åŒçš„è„šæœ¬ï¼Œæˆ‘å°±å¯ä»¥é€šè¿‡å’ŒalbotèŠå¤©çš„å½¢å¼æ¥çµæ´»ç®¡ç†MiniPCäº†ã€‚</p>
<h2 id="é¡¹ç›®ç‰¹ç‚¹"><a href="#é¡¹ç›®ç‰¹ç‚¹" class="headerlink" title="é¡¹ç›®ç‰¹ç‚¹"></a>é¡¹ç›®ç‰¹ç‚¹</h2><p>ç®€å•ï¼Œç®€å•ï¼Œè¿˜æ˜¯ç®€å•ã€‚ä½¿ç”¨æœ€å°çš„æˆæœ¬å®ç°æƒ³è¦çš„æ•ˆæœï¼Œé€‚åˆç”¨æ¥å…¥é—¨Pythonå¤šçº¿ç¨‹å’Œç½‘ç»œç¼–ç¨‹ã€‚</p>
<ul>
<li>ç½‘ç»œæ¨¡å‹å‚è€ƒçš„IOCPæ¨¡å‹ï¼Œä¸»çº¿ç¨‹ç›‘å¬ï¼Œç›‘å¬åˆ°çš„è¿æ¥åˆ†é…ç»™çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å»å¤„ç†</li>
<li>ç”±äºMiniPCæ€§èƒ½æœ‰é™ï¼Œé€šè¿‡åŠ é”é™åˆ¶äº†åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªå¯¹è¯å¯ä»¥è¯·æ±‚åå°<code>ollama</code></li>
<li><code>ollama</code>æ¯ç”Ÿæˆä¸€è¡Œï¼Œ<code>albot</code>ä¼šç«‹å³å‘å‡ºï¼Œè€Œéç­‰åˆ°AIå›å¤å…¨éƒ¨ç”Ÿæˆ</li>
<li>ä»…ä½¿ç”¨Pythoné»˜è®¤åº“</li>
<li>å¯¹äº<code>ollama</code>çš„HTTPå“åº”åšäº†ç›¸å¯¹å¥å£®çš„å¤„ç†ï¼ŒåŒæ—¶ä»¥æ€§èƒ½ä¼˜å…ˆ</li>
</ul>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://github.com/qspidy/albot">https://github.com/qspidy/albot</a></p>
<p>åç»­è¿˜ä¼šæ ¹æ®éœ€è¦å¯¹å…¶è¿›è¡Œæ”¹è¿›ä»¥åŠåŠŸèƒ½çš„æ·»åŠ å’Œå®Œå–„ï¼Œæ¯”å¦‚ä½¿ç”¨æ•°æ®åº“å­˜èŠå¤©è®°å½•å’ŒAIå¯¹è¯çš„Promptã€è®¾ç½®ä¸åŒçš„å‘½ä»¤æ¥çµæ´»æ§åˆ¶å’Œ<code>ollama</code>çš„äº¤äº’ã€ä½¿ç”¨Dockeræ‰“åŒ…æˆé•œåƒç­‰ã€‚ä¸»è¦ä»¥å­¦ä¹ ä¸ºç›®çš„ï¼Œé¡ºå¸¦è®©å…¶äº§ç”Ÿç‚¹å®é™…ä»·å€¼ï¼Œåªæœ‰å®è·µæ‰èƒ½çŸ¥é“ä»¥å‰ä»¥ä¸ºå¾ˆç®€å•çš„åŠŸèƒ½å®ç°èµ·æ¥ä¹Ÿæœ‰ä¸å°‘ç»†èŠ‚å•Šã€‚</p>
<p>è¿˜åœ¨åŠªåŠ›é€‚åº”PDBä¸­â€¦</p>
]]></content>
      <tags>
        <tag>Linux</tag>
        <tag>Python</tag>
        <tag>IRC</tag>
        <tag>MultiThread</tag>
        <tag>AI</tag>
        <tag>Bot</tag>
      </tags>
  </entry>
  <entry>
    <title>Install and Setup NixOS + Hyprland from Scratch</title>
    <url>/2025/05/05/Install-and-Setup-NixOS-Hyprland-from-Scratch/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><h2 id="First-of-all"><a href="#First-of-all" class="headerlink" title="First of all"></a>First of all</h2><p>Though itâ€™s from SCRATCH, I suppose the reader know basic Linux concepts and commands and is able to use basic tools for os installation such as Vectory. Of course this is mainly based on my walk through, so remember using google to finish what is not mentioned for you.</p>
<p>I fell in love with Nix for the first I have it installed cause it is definitely what I am searching for after more than three years of Arch usage. I have reinstalled my Arch many times, and each time I have to reinstall the packages manually and spend time to change the configurations, itâ€™s fun and I enjoy it. But recently I donâ€™t have much time left for it, so NixOS is definitely what I want.</p>
<p>As for Hyprland, I found it very popular recently and itâ€™s written in cpp, so I tried it with Arch from scratch and found it a fancy wm.</p>
<hr>
<h2 id="Download-and-boot-from-image"><a href="#Download-and-boot-from-image" class="headerlink" title="Download  and boot from image"></a>Download  and boot from image</h2><p>Get NixOS image <a href="https://nixos.org/download/">here</a>, I chose Minimal ISO image in my case.</p>
<p>To begin the installation, you have to boot your computer from the install drive.</p>
<ol>
<li>Plug in the install drive. Then turn on or restart your computer.</li>
<li>Open the boot menu by pressing the appropriate key, which is usually shown on the display on early boot. Select the USB flash drive (the option usually contains the word â€œUSBâ€). If you choose the incorrect drive, your computer will likely continue to boot as normal. In that case restart your computer and pick a different drive.</li>
</ol>
<hr>
<h2 id="Setup-WIFI-Optional"><a href="#Setup-WIFI-Optional" class="headerlink" title="Setup WIFI (Optional)"></a>Setup WIFI (Optional)</h2><p>There is no <code>iwd</code> preinstalled in NixOS like Arch, so use <code>wpa_supplicant</code> instead.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Bring the interface up</span></span><br><span class="line">sudo ip <span class="built_in">link</span> <span class="built_in">set</span> wlan0 up</span><br><span class="line"></span><br><span class="line"><span class="comment"># Scan avaiable networks</span></span><br><span class="line">sudo iw wlan0 scan | grep SSID</span><br><span class="line"></span><br><span class="line"><span class="comment"># Generate a wpa_supplicant config</span></span><br><span class="line">wpa_passphrase <span class="string">&quot;YourSSID&quot;</span> <span class="string">&quot;YourPassword&quot;</span> | sudo <span class="built_in">tee</span> /etc/wpa_supplicant.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># Start wpa_supplicant</span></span><br><span class="line">sudo wpa_supplicant -B -i wlan0 -c /etc/wpa_supplicant.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># Get an IP address</span></span><br><span class="line">sudo dhcpcd wlan0</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check connectivity</span></span><br><span class="line">ping -c 4 8.8.8.8</span><br><span class="line"></span><br><span class="line"><span class="comment"># Optional: Stop wpa_supplicant</span></span><br><span class="line"><span class="comment"># sudo pkill wpa_supplicant</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Try-installing-new-packages"><a href="#Try-installing-new-packages" class="headerlink" title="Try installing new packages"></a>Try installing new packages</h2><p>Before installing a new package, you may want to check if the package exists and how to install from <a href="https://search.nixos.org/packages">here</a>.</p>
<p>Most of the time, install a package like this:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nix-shell -p cmatrix</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Partitioning-and-formatting"><a href="#Partitioning-and-formatting" class="headerlink" title="Partitioning and formatting"></a>Partitioning and formatting</h2><p>Run <code>lsblk</code> to see where you gonna install NixOS into, the output may looks like this:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">NAME                         MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS</span><br><span class="line">nvme1n1                      259:0    0   3.7T  0 disk</span><br><span class="line">â”œâ”€nvme1n1p1                  259:1    0    16M  0 part</span><br><span class="line">â”œâ”€nvme1n1p2                  259:2    0 515.4G  0 part</span><br><span class="line">â””â”€nvme1n1p3                  259:3    0   300G  0 part</span><br></pre></td></tr></table></figure>

<p>Suppose the <code>nvme1n1p3</code> is what you want and you are SURE to format it:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo mkfs.ext4 -L nixos /dev/nvme1n1p3</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Install-NixOS"><a href="#Install-NixOS" class="headerlink" title="Install NixOS"></a>Install NixOS</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Mount the target file system on which NixOS should be installed onÂ `/mnt`</span></span><br><span class="line">mount /dev/disk/by-label/nixos /mnt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Suppose you UEFI partition is /dev/nvme1n1p1</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /mnt/boot</span><br><span class="line">mount /dev/nvme1n1p1 /mnt/boot</span><br><span class="line"></span><br><span class="line"><span class="comment"># Generate default configuration file</span></span><br><span class="line">nixos-generate-config --root /mnt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Edit configuration file</span></span><br><span class="line">vim /mnt/etc/nixos/configuration.nix</span><br></pre></td></tr></table></figure>

<p>(Optinal) å°†æ¸…åæºåšä¸ºé»˜è®¤æºï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹åˆ°é…ç½®æ–‡ä»¶å¤§æ‹¬å·å†…</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">nix.settings.substituters = [ &quot;https://mirrors.tuna.tsinghua.edu.cn/nix-channels/store&quot; ];</span><br></pre></td></tr></table></figure>

<p>åœ¨å®‰è£… NixOS æ—¶ä¸´æ—¶ä½¿ç”¨æ¸…åæº</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nixos-install --option substituters <span class="string">&quot;https://mirrors.tuna.tsinghua.edu.cn/nix-channels/store&quot;</span></span><br></pre></td></tr></table></figure>

<p>For more detailed processes, check <a href="https://nixos.org/manual/nixos/stable/#sec-installation-manual-partitioning">this</a></p>
<hr>
<h2 id="Start-NixOS"><a href="#Start-NixOS" class="headerlink" title="Start NixOS"></a>Start NixOS</h2><p>Reboot and choose the NixOS just installed. Setup wifi following the same procedure above, and this time you can make it start automatically via <code>systemctl enable --now wpa_supplicant</code>.</p>
<p>Or you can use NetworkManager instead, procedure will not be presented here.</p>
<hr>
<h2 id="Install-Hyprland"><a href="#Install-Hyprland" class="headerlink" title="Install Hyprland"></a>Install Hyprland</h2><p>Edit <code>/etc/nixos/configuration.nix</code> and add following:</p>
<figure class="highlight nix"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  programs.<span class="attr">hyprland</span> = &#123;</span><br><span class="line">    <span class="attr">enable</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="attr">withUWSM</span> = <span class="literal">true</span>; <span class="comment"># recommended for most users</span></span><br><span class="line">    xwayland.<span class="attr">enable</span> = <span class="literal">true</span>; <span class="comment"># Xwayland can be disabled.</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Then install necessary packages, I use <code>alacritty</code> as my default terminal on Hyprland:</p>
<figure class="highlight nix"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  environment.<span class="attr">systemPackages</span> = <span class="keyword">with</span> pkgs; [</span><br><span class="line">    alacritty</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Rebuild NixOS:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo nixos-rebuild switch</span><br></pre></td></tr></table></figure>

<p>Edit Hyprlandâ€™s config file <code>~/.config/hypr/hyprland.conf</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># change the default terminal from kitty to alacritty</span><br><span class="line"># $terminal = kitty</span><br><span class="line">$terminal = alacrityy</span><br></pre></td></tr></table></figure>

<p>Start Hyprland.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">uwsm start select</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="The-end"><a href="#The-end" class="headerlink" title="The end"></a>The end</h2><p>The most basic setup has been done, you can now walk around the Hyprland and NixOSâ€™s wiki and forums for more useful configurations and build up the final system that you want.</p>
<p>Enjoy!</p>
<hr>
<h2 id="See-also"><a href="#See-also" class="headerlink" title="See also"></a>See also</h2><ul>
<li><a href="https://discourse.nixos.org/t/screenshots-on-hyprland-on-nixos/29055">Screenshots on hyprland on nixos</a></li>
</ul>
<hr>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li><a href="https://nixos.org/manual/nixos/stable/">NixOS Manual</a></li>
<li><a href="https://mirrors.tuna.tsinghua.edu.cn/help/nix-channels/">æ¸…åæº Nix Channels</a></li>
<li><a href="https://wiki.nixos.org/wiki/Hyprland">Hyprland NixOS Wiki</a></li>
</ul>
]]></content>
      <tags>
        <tag>Linux</tag>
        <tag>WM</tag>
        <tag>NixOS</tag>
      </tags>
  </entry>
  <entry>
    <title>Setup Orange Pi Zero 3 as a Debian Server</title>
    <url>/2025/01/05/Setup-Orange-Pi-Zero-3-as-a-Debian-Server/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>I got the board several days ago, and now itâ€™s time to get it to work. However I got stuck on WiFi configuration again though I did it many times before. So I write this post to make the steps more clear in my mind.</p>
<hr>
<h2 id="About-the-board"><a href="#About-the-board" class="headerlink" title="About the board"></a>About the board</h2><p>Itâ€™s <a href="http://www.orangepi.org/html/hardWare/computerAndMicrocontrollers/details/Orange-Pi-Zero-3.html">Orange Pi Zero 3</a>, a really small and powerful single-board computer! Here is its introduction from official:</p>
<blockquote>
<p>Orange Pi Zero 3 is powered by Allwinner H618 quad-core Cortex-A53 processor, Arm Mali-G31 MP2 GPU, supports OpenGL ES 1.0&#x2F;2.0&#x2F;3.2, OpenCL 2.0, Vulkan 1.1, etc.,with 1GB&#x2F;1.5GB&#x2F;2GB&#x2F;4GB memory options, decoding of multiple video formats is supported, and the Micro-HDMI output supports 4K display. In addition, Orange Pi Zero 3 can also be extended with headphones, TVout, USB2.0, IR reception and other functions via 13Pin expansion ports with an adapter board, in addition to the 26Pin expansion function port on the board, further enriching the functional interface of the motherboard.</p>
</blockquote>
<p>In my case, it has 4GB LPDDR4 which makes it sufficient for my various services.</p>
<p>Here is what I got:</p>
<img src="/2025/01/05/Setup-Orange-Pi-Zero-3-as-a-Debian-Server/1.1.jpg" class="">

<p>Itâ€™s easy to setup, and here is finally what I got:</p>
<img src="/2025/01/05/Setup-Orange-Pi-Zero-3-as-a-Debian-Server/1.2.jpg" class="">

<img src="/2025/01/05/Setup-Orange-Pi-Zero-3-as-a-Debian-Server/1.3.jpg" class="">

<h2 id="Burn-the-image"><a href="#Burn-the-image" class="headerlink" title="Burn the image"></a>Burn the image</h2><p>There are several images on official site:</p>
<ul>
<li>Orange Pi OS(Arch)</li>
<li>Ubuntu Image</li>
<li>Debian Image</li>
<li>Android Image</li>
<li>OpenWRT</li>
</ul>
<p>I chose debian as itâ€™s one of my most familiar distros, there are also imaging tools on official site:</p>
<img src="/2025/01/05/Setup-Orange-Pi-Zero-3-as-a-Debian-Server/1.4.jpg" class="">

<p>Burningâ€¦</p>
<img src="/2025/01/05/Setup-Orange-Pi-Zero-3-as-a-Debian-Server/1.5.jpg" class="">

<p>Insert sd card and power on:</p>
<img src="/2025/01/05/Setup-Orange-Pi-Zero-3-as-a-Debian-Server/1.6.jpg" class="">

<p>Finally got to the shell (BTW, the default password for orangepi is <code>orangepi</code>):</p>
<img src="/2025/01/05/Setup-Orange-Pi-Zero-3-as-a-Debian-Server/1.7.jpg" class="">

<h2 id="Basic-setup"><a href="#Basic-setup" class="headerlink" title="Basic setup"></a>Basic setup</h2><h3 id="WiFi"><a href="#WiFi" class="headerlink" title="WiFi"></a>WiFi</h3><p>The first thing to do about this new sever must be setting up wifi connection cause I donâ€™t have another net cable.</p>
<p>There are generally three choices or tools on command line to manage wifi connections: <code>iwconfig</code>, <code>wpa_supplicant</code> and <code>nmcli</code>. After asking chatgpt for assistance, I finally decide to leave all of them behind and just edit <code>/etc/network/interfaces</code> to setup the wifi.</p>
<p>Actually when I asked chatgpt about how to setup wifi connection on linux,  it didnâ€™t mention editing <code>/etc/network/interfaces</code>. I happened to know it when I was configuring network for pve, and it is really a simple and basic way to setup wifi connections. And this time, I happened to know that I can setup a roaming wifi, so it can auto connect to different wifi if the current wifi connection corrupts, itâ€™s useful but I donâ€™t need it for the moment.</p>
<p>Edit <code>/etc/network/interfaces</code> and add following like this</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">auto wlan0</span><br><span class="line">iface wlan0 inet dhcp</span><br><span class="line">	wpa-ssid &lt;wifi-name&gt;</span><br><span class="line">	wpa-psk &lt;password&gt;</span><br></pre></td></tr></table></figure>
<img src="/2025/01/05/Setup-Orange-Pi-Zero-3-as-a-Debian-Server/1.8.jpg" class="">

<p>Save and then restart, then the wifi will automatic be connected and got an ip:</p>
<img src="/2025/01/05/Setup-Orange-Pi-Zero-3-as-a-Debian-Server/1.9.jpg" class="">

<h3 id="Mirror-source"><a href="#Mirror-source" class="headerlink" title="Mirror source"></a>Mirror source</h3><p>The default mirror source is rather slow, so I change <code>/etc/apt/sources.list</code> to the following:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">deb http://mirrors.ustc.edu.cn/debian bookworm main contrib non-free non-free-firmware</span><br><span class="line"><span class="comment">#deb http://repo.huaweicloud.com/debian bookworm main contrib non-free non-free-firmware</span></span><br><span class="line"><span class="comment">#deb-src http://repo.huaweicloud.com/debian bookworm main contrib non-free non-free-firmware</span></span><br><span class="line"></span><br><span class="line">deb http://mirrors.ustc.edu.cn/debian bookworm-updates main contrib non-free non-free-firmware</span><br><span class="line"><span class="comment">#deb http://repo.huaweicloud.com/debian bookworm-updates main contrib non-free non-free-firmware</span></span><br><span class="line"><span class="comment">#deb-src http://repo.huaweicloud.com/debian bookworm-updates main contrib non-free non-free-firmware</span></span><br><span class="line"></span><br><span class="line">deb http://mirrors.ustc.edu.cn/debian bookworm-backports main contrib non-free non-free-firmware</span><br><span class="line"><span class="comment">#deb http://repo.huaweicloud.com/debian bookworm-backports main contrib non-free non-free-firmware</span></span><br><span class="line"><span class="comment">#deb-src http://repo.huaweicloud.com/debian bookworm-backports main contrib non-free non-free-firmware</span></span><br></pre></td></tr></table></figure>
<p>and remove the useless source in <code>/etc/apt/sources.list.d/docker.list</code>.</p>
<h3 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h3><p>It surprised me that the image preinstalled zsh and oh-my-zsh, also tools like tmux, git, docker. here is the default <code>.zshrc</code> file:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># If you come from bash you might have to change your $PATH.</span></span><br><span class="line"><span class="comment"># export PATH=$HOME/bin:$HOME/.local/bin:/usr/local/bin:$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Path to your Oh My Zsh installation.</span></span><br><span class="line"><span class="built_in">export</span> ZSH=/etc/oh-my-zsh</span><br><span class="line"><span class="built_in">export</span> ZSH_CACHE_DIR=~/.oh-my-zsh/cache</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set name of the theme to load --- if set to &quot;random&quot;, it will</span></span><br><span class="line"><span class="comment"># load a random theme each time Oh My Zsh is loaded, in which case,</span></span><br><span class="line"><span class="comment"># to know which specific one was loaded, run: echo $RANDOM_THEME</span></span><br><span class="line"><span class="comment"># See https://github.com/ohmyzsh/ohmyzsh/wiki/Themes</span></span><br><span class="line">ZSH_THEME=<span class="string">&quot;mrtazz&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set list of themes to pick from when loading at random</span></span><br><span class="line"><span class="comment"># Setting this variable when ZSH_THEME=random will cause zsh to load</span></span><br><span class="line"><span class="comment"># a theme from this variable instead of looking in $ZSH/themes/</span></span><br><span class="line"><span class="comment"># If set to an empty array, this variable will have no effect.</span></span><br><span class="line"><span class="comment"># ZSH_THEME_RANDOM_CANDIDATES=( &quot;robbyrussell&quot; &quot;agnoster&quot; )</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line to use case-sensitive completion.</span></span><br><span class="line"><span class="comment"># CASE_SENSITIVE=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line to use hyphen-insensitive completion.</span></span><br><span class="line"><span class="comment"># Case-sensitive completion must be off. _ and - will be interchangeable.</span></span><br><span class="line"><span class="comment"># HYPHEN_INSENSITIVE=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment one of the following lines to change the auto-update behavior</span></span><br><span class="line"><span class="comment"># zstyle &#x27;:omz:update&#x27; mode disabled  # disable automatic updates</span></span><br><span class="line"><span class="comment"># zstyle &#x27;:omz:update&#x27; mode auto      # update automatically without asking</span></span><br><span class="line"><span class="comment"># zstyle &#x27;:omz:update&#x27; mode reminder  # just remind me to update when it&#x27;s time</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line to change how often to auto-update (in days).</span></span><br><span class="line"><span class="comment"># zstyle &#x27;:omz:update&#x27; frequency 13</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line if pasting URLs and other text is messed up.</span></span><br><span class="line"><span class="comment"># DISABLE_MAGIC_FUNCTIONS=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line to disable colors in ls.</span></span><br><span class="line"><span class="comment"># DISABLE_LS_COLORS=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line to disable auto-setting terminal title.</span></span><br><span class="line"><span class="comment"># DISABLE_AUTO_TITLE=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line to enable command auto-correction.</span></span><br><span class="line"><span class="comment"># ENABLE_CORRECTION=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line to display red dots whilst waiting for completion.</span></span><br><span class="line"><span class="comment"># You can also set it to another string to have that shown instead of the default red dots.</span></span><br><span class="line"><span class="comment"># e.g. COMPLETION_WAITING_DOTS=&quot;%F&#123;yellow&#125;waiting...%f&quot;</span></span><br><span class="line"><span class="comment"># Caution: this setting can cause issues with multiline prompts in zsh &lt; 5.7.1 (see #5765)</span></span><br><span class="line"><span class="comment"># COMPLETION_WAITING_DOTS=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line if you want to disable marking untracked files</span></span><br><span class="line"><span class="comment"># under VCS as dirty. This makes repository status check for large repositories</span></span><br><span class="line"><span class="comment"># much, much faster.</span></span><br><span class="line"><span class="comment"># DISABLE_UNTRACKED_FILES_DIRTY=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line if you want to change the command execution time</span></span><br><span class="line"><span class="comment"># stamp shown in the history command output.</span></span><br><span class="line"><span class="comment"># You can set one of the optional three formats:</span></span><br><span class="line"><span class="comment"># &quot;mm/dd/yyyy&quot;|&quot;dd.mm.yyyy&quot;|&quot;yyyy-mm-dd&quot;</span></span><br><span class="line"><span class="comment"># or set a custom format using the strftime function format specifications,</span></span><br><span class="line"><span class="comment"># see &#x27;man strftime&#x27; for details.</span></span><br><span class="line"><span class="comment"># HIST_STAMPS=&quot;mm/dd/yyyy&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Would you like to use another custom folder than $ZSH/custom?</span></span><br><span class="line"><span class="comment"># ZSH_CUSTOM=/path/to/new-custom-folder</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Which plugins would you like to load?</span></span><br><span class="line"><span class="comment"># Standard plugins can be found in $ZSH/plugins/</span></span><br><span class="line"><span class="comment"># Custom plugins may be added to $ZSH_CUSTOM/plugins/</span></span><br><span class="line"><span class="comment"># Example format: plugins=(rails git textmate ruby lighthouse)</span></span><br><span class="line"><span class="comment"># Add wisely, as too many plugins slow down shell startup.</span></span><br><span class="line">plugins=(evalcache git git-extras debian tmux screen <span class="built_in">history</span> extract colorize web-search docker)</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> <span class="variable">$ZSH</span>/oh-my-zsh.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># User configuration</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># export MANPATH=&quot;/usr/local/man:$MANPATH&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># You may need to manually set your language environment</span></span><br><span class="line"><span class="comment"># export LANG=en_US.UTF-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Preferred editor for local and remote sessions</span></span><br><span class="line"><span class="comment"># if [[ -n $SSH_CONNECTION ]]; then</span></span><br><span class="line"><span class="comment">#   export EDITOR=&#x27;vim&#x27;</span></span><br><span class="line"><span class="comment"># else</span></span><br><span class="line"><span class="comment">#   export EDITOR=&#x27;mvim&#x27;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Compilation flags</span></span><br><span class="line"><span class="comment"># export ARCHFLAGS=&quot;-arch x86_64&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set personal aliases, overriding those provided by Oh My Zsh libs,</span></span><br><span class="line"><span class="comment"># plugins, and themes. Aliases can be placed here, though Oh My Zsh</span></span><br><span class="line"><span class="comment"># users are encouraged to define aliases within a top-level file in</span></span><br><span class="line"><span class="comment"># the $ZSH_CUSTOM folder, with .zsh extension. Examples:</span></span><br><span class="line"><span class="comment"># - $ZSH_CUSTOM/aliases.zsh</span></span><br><span class="line"><span class="comment"># - $ZSH_CUSTOM/macos.zsh</span></span><br><span class="line"><span class="comment"># For a full list of active aliases, run `alias`.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Example aliases</span></span><br><span class="line"><span class="comment"># alias zshconfig=&quot;mate ~/.zshrc&quot;</span></span><br><span class="line"><span class="comment"># alias ohmyzsh=&quot;mate ~/.oh-my-zsh&quot;</span></span><br></pre></td></tr></table></figure>
<p>I leave the shell configurations be cause it is well enough.</p>
<h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p>Note that itâ€™s defaultly installed docker, however, I canâ€™t use <code>docker compose</code> to start a container from compose file cause it said <code>docker: &#39;compose&#39; is not a docker command.</code>.</p>
<p>I have to reinstall the docker. Itâ€™s rather easy, just run:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com | sh</span><br></pre></td></tr></table></figure>

<p>After waiting for a while, itâ€™s done. Now I can use  <code>docker compose</code> to start a container from compose file.</p>
<h3 id="Disable-auto-login-optional"><a href="#Disable-auto-login-optional" class="headerlink" title="Disable auto login (optional)"></a>Disable auto login (optional)</h3><p>By default, when Iâ€™m use the tty to start a session, it will automaticly logs in to the terminal as orangepi. But I donâ€™t want it to be like this after I setted it up so that it is necessary to disable it. There is document on official doc site on <strong>How to set automatic terminal login in linux system</strong>, the url is at the end of the post.</p>
<blockquote>
<p>Use the following command to set the root user to automatically log in to the terminal<br><code>orangepi@orangepi:~$ sudo auto_login_cli.sh root</code></p>
<p>Use the following command to disable automatic login terminal<br><code>orangepi@orangepi:~$ sudo auto_login_cli.sh -d</code></p>
<p>Use the following command to set the orangepi user to automatically log in to the terminal again<br><code>orangepi@orangepi:~$ sudo auto_login_cli.sh orangepi</code></p>
</blockquote>
<hr>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>Orange Pi Zero 3 is small, powerful and flexible. I can burn different images to different sd cards to achieve easily switching to different operating systems and performing various expriments which would be a quite fancy journey. </p>
<p>In this blog post, I just present the most basic use case for the Orange Pi Zero 3 and explore its capabilities and there are a lot more to be explored. Wish it can help those who are new to Orange Pi Zero 3.</p>
<p>Feel free to leave comments below! :)</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li><a href="http://www.orangepi.org/html/hardWare/computerAndMicrocontrollers/details/Orange-Pi-Zero-3.html">Orange Pi Zero3 Introduction</a></li>
<li><a href="http://www.orangepi.org/html/hardWare/computerAndMicrocontrollers/service-and-support/Orange-Pi-Zero-3.html">Orange Pi Zero 3 Downloads</a></li>
<li><a href="http://www.orangepi.org/orangepiwiki/index.php/Orange_Pi_Zero_3#How_to_set_automatic_terminal_login_in_linux_system">How to set automatic terminal login in linux system</a></li>
</ul>
]]></content>
      <tags>
        <tag>Tech</tag>
        <tag>WiFi</tag>
        <tag>OpenWrt</tag>
        <tag>Single-Board</tag>
        <tag>Router</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€DST Dedicated Serverã€‘ç®€å•å¼€æœæµç¨‹ï¼ˆWriten by MrOrange)</title>
    <url>/2023/10/13/dst-dedicate-server-start/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><hr>
<h2 id="æ‹¥æœ‰ä¸€å°æœåŠ¡å™¨"><a href="#æ‹¥æœ‰ä¸€å°æœåŠ¡å™¨" class="headerlink" title="æ‹¥æœ‰ä¸€å°æœåŠ¡å™¨"></a>æ‹¥æœ‰ä¸€å°æœåŠ¡å™¨</h2><ul>
<li>é¦–å…ˆï¼Œå½“ç„¶æ˜¯æœ‰ä¸€å°å·²ç»è£…å¥½Debiançš„æœåŠ¡å™¨ï¼ˆ1Mbpså¸¦å®½å¤§æ¦‚å¯¹åº”2~4äººï¼Œä¸€ä¸ªå­˜æ¡£2æ ¸å°±å¤Ÿï¼Œæ£±é•œ+å‹‹ç« è‡³å°‘å¾—3Gå†…å­˜ï¼‰ï¼Œä¸å»ºè®®Ubuntuï¼Œä¸€äº›ä¾èµ–ä¼¼ä¹æ— æ³•å®‰è£…ã€‚</li>
<li>å®‰è£…ä¹‹åå¯èƒ½ç”¨åˆ°çš„åŒ…ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install tmux btop htop fish ranger git</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="é…ç½®åŸºç¡€ç¯å¢ƒï¼ˆsteamcmd-dstæœåŠ¡å™¨ï¼‰ï¼š"><a href="#é…ç½®åŸºç¡€ç¯å¢ƒï¼ˆsteamcmd-dstæœåŠ¡å™¨ï¼‰ï¼š" class="headerlink" title="é…ç½®åŸºç¡€ç¯å¢ƒï¼ˆsteamcmd, dstæœåŠ¡å™¨ï¼‰ï¼š"></a>é…ç½®åŸºç¡€ç¯å¢ƒï¼ˆsteamcmd, dstæœåŠ¡å™¨ï¼‰ï¼š</h2><ul>
<li>ä¸€è¡Œè¡Œå¤åˆ¶è¿è¡Œï¼Œæ³¨æ„æ˜¯å¦æŠ¥é”™</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo dpkg --add-architecture i386 <span class="comment"># If running a 64bit OS</span></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install lib32gcc1    <span class="comment"># If running a 64bit OS</span></span><br><span class="line"></span><br><span class="line">sudo apt-get install lib32stdc++6 <span class="comment"># If running a 64bit OS</span></span><br><span class="line">sudo apt-get install libgcc1      <span class="comment"># If running a 32bit OS</span></span><br><span class="line">sudo apt-get install libcurl4-gnutls-dev:i386</span><br><span class="line">sudo useradd -m steam</span><br><span class="line">sudo su - steam</span><br><span class="line"><span class="built_in">mkdir</span> ~/steamcmd</span><br><span class="line"><span class="built_in">cd</span> ~/steamcmd</span><br><span class="line">wget &lt;https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz&gt;</span><br><span class="line">tar -xvzf steamcmd_linux.tar.gz</span><br><span class="line">./steamcmd.sh</span><br><span class="line">force_install_dir /home/steam/steamapps/DST (or whatever absolute path is wanted)</span><br><span class="line">login anonymous</span><br><span class="line">app_update 343050 validate</span><br><span class="line">quit</span><br><span class="line"><span class="built_in">cd</span> /home/steam/steamapps/DST/bin/</span><br><span class="line">./dontstarve_dedicated_server_nullrenderer</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>æœ€åä¸€å¥å°è¯•å¯åŠ¨æœåŠ¡å™¨ï¼Œä¼šç”Ÿæˆä¸€äº›ç®€å•çš„é…ç½®ï¼Œå¦‚æ— æŠ¥é”™åˆ™åŸºæœ¬ç¯å¢ƒå·²ç»é…ç½®å¥½ã€‚</li>
</ul>
<hr>
<h2 id="å…‹éš†MrOrangeçš„æœåŠ¡å™¨ç®¡ç†è„šæœ¬ï¼Œç»™äºˆæ‰§è¡Œæƒé™ï¼š"><a href="#å…‹éš†MrOrangeçš„æœåŠ¡å™¨ç®¡ç†è„šæœ¬ï¼Œç»™äºˆæ‰§è¡Œæƒé™ï¼š" class="headerlink" title="å…‹éš†MrOrangeçš„æœåŠ¡å™¨ç®¡ç†è„šæœ¬ï¼Œç»™äºˆæ‰§è¡Œæƒé™ï¼š"></a>å…‹éš†MrOrangeçš„æœåŠ¡å™¨ç®¡ç†è„šæœ¬ï¼Œç»™äºˆæ‰§è¡Œæƒé™ï¼š</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/qspidy/dst-dedicated-server-admin-scripts.git</span><br><span class="line"><span class="built_in">chmod</span> +x dst-dedicated-server-admin-scripts/dst*</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="ç”Ÿæˆå¹¶ä¸Šä¼ cluster-token-txt"><a href="#ç”Ÿæˆå¹¶ä¸Šä¼ cluster-token-txt" class="headerlink" title="ç”Ÿæˆå¹¶ä¸Šä¼ cluster_token.txt"></a>ç”Ÿæˆå¹¶ä¸Šä¼ cluster_token.txt</h2><ul>
<li>æœ¬åœ°DSTæ§åˆ¶å°è¿è¡Œ<code>TheNet:GenerateClusterToken()</code>ç”Ÿæˆä»¤ç‰Œæ–‡ä»¶<code>cluster_token.txt</code>ï¼Œä½ç½®åœ¨<code>C:/Users/&lt;yourusername&gt;/Documents/Klei/DoNotStarveTogether</code>ï¼ˆå¤§æ¦‚ï¼Œä¹Ÿå¯èƒ½åœ¨æŸä¸ªå­æ–‡ä»¶å¤¹ï¼‰ï¼Œç„¶åä¸Šä¼ è‡³æœåŠ¡å™¨<code>/home/steam/.klei/DoNotStarveTogether/</code>ç›®å½•ã€‚è¯¥æ–‡ä»¶ç›¸å½“äºèº«ä»½è®¤è¯ï¼Œå³åªæœ‰ä¹°äº†è¿™æ¸¸æˆçš„äººæ‰èƒ½åˆ›æœåŠ¡å™¨ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ç™½å«–å…¶å®ƒäººçš„ï¼‰ã€‚</li>
</ul>
<hr>
<h2 id="å¸¸è§„å¼€æœæ­¥éª¤"><a href="#å¸¸è§„å¼€æœæ­¥éª¤" class="headerlink" title="å¸¸è§„å¼€æœæ­¥éª¤"></a>å¸¸è§„å¼€æœæ­¥éª¤</h2><h3 id="åˆ›å»ºæ–°ä¸–ç•Œ"><a href="#åˆ›å»ºæ–°ä¸–ç•Œ" class="headerlink" title="åˆ›å»ºæ–°ä¸–ç•Œ"></a>åˆ›å»ºæ–°ä¸–ç•Œ</h3><ul>
<li>åœ¨æœ¬åœ°DSTæ¸¸æˆä¸­åˆ›å»ºæ–°ä¸–ç•Œï¼Œé…ç½®æƒ³è¦çš„æ¨¡ç»„ï¼Œä¸–ç•Œç±»å‹ç­‰ç­‰ã€‚</li>
</ul>
<h3 id="ä¸Šä¼ å­˜æ¡£æ–‡ä»¶å¤¹"><a href="#ä¸Šä¼ å­˜æ¡£æ–‡ä»¶å¤¹" class="headerlink" title="ä¸Šä¼ å­˜æ¡£æ–‡ä»¶å¤¹"></a>ä¸Šä¼ å­˜æ¡£æ–‡ä»¶å¤¹</h3><ul>
<li>æ‰¾åˆ°æ–°ä¸–ç•Œçš„å­˜æ¡£æ–‡ä»¶å¤¹ï¼ˆæ¸¸æˆé‡Œå­˜æ¡£è®¾ç½®é¡µæœ‰â€œæ‰“å¼€ä¸–ç•Œæ–‡ä»¶å¤¹â€é€‰é¡¹ï¼‰ï¼Œé€šå¸¸å«<code>Cluster_xx</code>ï¼ŒæŠŠ<code>Cluster_xx</code>æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„å­˜æ¡£ç›®å½•<code>/home/steam/.klei/DoNotStarveTogether/</code>ã€‚</li>
</ul>
<h3 id="ä¿®æ”¹ç›¸åº”é…ç½®ï¼ˆä¸»è¦æ˜¯cluster-iniï¼‰"><a href="#ä¿®æ”¹ç›¸åº”é…ç½®ï¼ˆä¸»è¦æ˜¯cluster-iniï¼‰" class="headerlink" title="ä¿®æ”¹ç›¸åº”é…ç½®ï¼ˆä¸»è¦æ˜¯cluster.iniï¼‰"></a>ä¿®æ”¹ç›¸åº”é…ç½®ï¼ˆä¸»è¦æ˜¯cluster.iniï¼‰</h3><ul>
<li>æ‰“å¼€æœåŠ¡å™¨æ–°ä¸–ç•Œå­˜æ¡£æ–‡ä»¶å¤¹<code>Cluster_xx</code>é‡Œçš„<code>cluster.ini</code>æ–‡ä»¶ï¼Œä¿®æ”¹ç›¸åº”çš„é…ç½®ï¼Œä¸»è¦æ˜¯ä¿®æ”¹äººæ•°ã€‚</li>
<li>[å¯é€‰]ç›´è¿ç«¯å£åœ¨<code>Cluster_xx/Master/server.ini</code>é‡Œå¯ä»¥æŸ¥çœ‹å’Œä¿®æ”¹ã€‚åŒæ—¶å¼€ä¸åŒçš„å­˜æ¡£éœ€è¦ä¿®æ”¹<code>Cluster_xx/Master/server.ini</code>å’Œ<code>Cluster_xx/Caves/server.ini</code>é‡Œçš„<code>server_port</code>ï¼Œä»¥åŠ<code>cluster.ini</code>é‡Œçš„<code>master_port</code>ï¼Œä»¥é¿å…ç«¯å£å†²çªã€‚</li>
</ul>
<hr>
<h2 id="å¯åŠ¨å’Œç»´æŠ¤"><a href="#å¯åŠ¨å’Œç»´æŠ¤" class="headerlink" title="å¯åŠ¨å’Œç»´æŠ¤"></a>å¯åŠ¨å’Œç»´æŠ¤</h2><h3 id="å¯åŠ¨dstæœåŠ¡å™¨-è¿™é‡Œå‡è®¾å­˜æ¡£æ–‡ä»¶å¤¹ä¸ºCluster-12-ï¼š"><a href="#å¯åŠ¨dstæœåŠ¡å™¨-è¿™é‡Œå‡è®¾å­˜æ¡£æ–‡ä»¶å¤¹ä¸ºCluster-12-ï¼š" class="headerlink" title="å¯åŠ¨dstæœåŠ¡å™¨(è¿™é‡Œå‡è®¾å­˜æ¡£æ–‡ä»¶å¤¹ä¸ºCluster_12 )ï¼š"></a>å¯åŠ¨dstæœåŠ¡å™¨(è¿™é‡Œå‡è®¾å­˜æ¡£æ–‡ä»¶å¤¹ä¸º<code>Cluster_12</code> )ï¼š</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./dst-dedicated-server-admin-scripts/dst_start.sh -C 12</span><br><span class="line"><span class="comment"># å¦‚è¦è¿›è¡ŒæœåŠ¡å™¨äº¤äº’å’ŒæŸ¥çœ‹è¾“å‡ºï¼ˆé»˜è®¤ dst-12 ä¸ºå¯¹åº”çš„tmuxä¼šè¯åï¼‰</span></span><br><span class="line">tmux attach -t dst-12</span><br></pre></td></tr></table></figure>

<h3 id="å®Œå…¨å…³é—­dstæœåŠ¡å™¨ï¼š"><a href="#å®Œå…¨å…³é—­dstæœåŠ¡å™¨ï¼š" class="headerlink" title="å®Œå…¨å…³é—­dstæœåŠ¡å™¨ï¼š"></a>å®Œå…¨å…³é—­dstæœåŠ¡å™¨ï¼š</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./dst-dedicated-server-admin-scripts/dst_shutdown.sh -C 12</span><br></pre></td></tr></table></figure>

<h3 id="ç”Ÿæˆå¤‡ä»½æ–‡ä»¶ï¼š"><a href="#ç”Ÿæˆå¤‡ä»½æ–‡ä»¶ï¼š" class="headerlink" title="ç”Ÿæˆå¤‡ä»½æ–‡ä»¶ï¼š"></a>ç”Ÿæˆå¤‡ä»½æ–‡ä»¶ï¼š</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./dst-dedicated-server-admin-scripts/dst_backup_cluster.sh -C 12</span><br></pre></td></tr></table></figure>

<h3 id="å•ç‹¬æ›´æ–°dstæœåŠ¡å™¨å’Œmodsï¼š"><a href="#å•ç‹¬æ›´æ–°dstæœåŠ¡å™¨å’Œmodsï¼š" class="headerlink" title="å•ç‹¬æ›´æ–°dstæœåŠ¡å™¨å’Œmodsï¼š"></a>å•ç‹¬æ›´æ–°dstæœåŠ¡å™¨å’Œmodsï¼š</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./dst-dedicated-server-admin-scripts/dst_update_modlist.sh 12</span><br><span class="line">./dst-dedicated-server-admin-scripts/dst_update.sh</span><br></pre></td></tr></table></figure>

<h3 id="æ›´æ–°ä¸­-å‘é€æœåŠ¡å™¨æŒ‡ä»¤ï¼ˆå¦‚ä¿å­˜ä¸–ç•Œã€è¸¢å‡ºæŸäººï¼‰ï¼š"><a href="#æ›´æ–°ä¸­-å‘é€æœåŠ¡å™¨æŒ‡ä»¤ï¼ˆå¦‚ä¿å­˜ä¸–ç•Œã€è¸¢å‡ºæŸäººï¼‰ï¼š" class="headerlink" title="(æ›´æ–°ä¸­)å‘é€æœåŠ¡å™¨æŒ‡ä»¤ï¼ˆå¦‚ä¿å­˜ä¸–ç•Œã€è¸¢å‡ºæŸäººï¼‰ï¼š"></a>(æ›´æ–°ä¸­)å‘é€æœåŠ¡å™¨æŒ‡ä»¤ï¼ˆå¦‚ä¿å­˜ä¸–ç•Œã€è¸¢å‡ºæŸäººï¼‰ï¼š</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¿å­˜ä¸–ç•Œ</span></span><br><span class="line">./dst-dedicated-server-admin-scripts/albin/tmux_send.al dst-12 c_save()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¸¢å‡ºæŸäºº</span></span><br><span class="line">./dst-dedicated-server-admin-scripts/albin/tmux_send.al dst-12 c_kill(<span class="string">&quot;player_id&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>å¸¸ç”¨æŒ‡ä»¤ï¼ˆå¤§æ¦‚ï¼‰ï¼š<code>c_save()</code> , <code>c_shutdown()</code> , <code>c_announce(&quot;message&quot;)</code> , <code>c_regenerateworld()</code> , <code>c_rollback()</code> , <code>c_listallplayers()</code> , <code>c_kill(&quot;player_id&quot;)</code> .</li>
<li>æ‰“å°å½“å‰ä¸–ç•Œä¿¡æ¯ï¼ˆå¤©æ•°ã€å­£èŠ‚ã€æ—¶æ®µï¼‰æŒ‡ä»¤ï¼š <code>TheNet:Announce(&quot;Current day: &quot;..TheWorld.state.cycles..&quot; Season: &quot;..TheWorld.state.season..&quot;, Phase: &quot;..TheWorld.state.phase)</code></li>
</ul>
<h3 id="æŸ¥çœ‹è·Ÿè¸ªæ—¥å¿—ï¼š"><a href="#æŸ¥çœ‹è·Ÿè¸ªæ—¥å¿—ï¼š" class="headerlink" title="æŸ¥çœ‹è·Ÿè¸ªæ—¥å¿—ï¼š"></a>æŸ¥çœ‹è·Ÿè¸ªæ—¥å¿—ï¼š</h3><ul>
<li>æŸ¥çœ‹è·Ÿè¸ªå½“å‰æœåŠ¡å™¨æ—¥å¿—ï¼š<code>tail -f ~/.klei/DoNotStarveTogether/Cluster_12/Master/server_log.txt</code></li>
<li>æŸ¥çœ‹è·Ÿè¸ªå½“å‰æœåŠ¡å™¨èŠå¤©æ—¥å¿—ï¼š<code>tail -f ~/.klei/DoNotStarveTogether/Cluster_12/Master/server_chat_log.txt</code></li>
</ul>
<hr>
<h2 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h2><ol>
<li><a href="https://dontstarve.fandom.com/wiki/Guides/Don%E2%80%99t_Starve_Together_Dedicated_Servers">Guides&#x2F;Donâ€™t Starve Together Dedicated Servers - FANDOM</a></li>
<li><a href="https://forums.kleientertainment.com/forums/topic/64441-dedicated-server-quick-setup-guide-linux/">Dedicated Server Quick Setup Guide - Linux</a></li>
<li><strong><a href="https://www.youtube.com/watch?v=ZkGPlQsiXzQ&list=PLaovyrM6DB1BIqTXAF6LZjQHSZHWqSIYz&ab_channel=Jazzy%27sGames">DEDICATED SERVER QUICK SETUP (Windows) | Donâ€™t Starve Together</a></strong></li>
<li><strong><a href="https://steamcommunity.com/sharedfiles/filedetails/?l=schinese&id=1616647350">Dedicated Serveré…ç½®é¡¹å’Œå‘½ä»¤è¡Œå‚æ•°è¯¦è§£</a></strong></li>
</ol>
]]></content>
      <categories>
        <category>æŠ˜è…¾åˆé›†</category>
        <category>Game</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Game</tag>
        <tag>DST</tag>
        <tag>Server</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨GDB+pwndbgè½»æ¾è§£å†³BinaryBombï¼</title>
    <url>/2022/04/21/binary-bomb/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘ç»ˆäºæŠŠé¸½äº†è¿‘ä¸€å¹´å¤šçš„<strong>BinaryBomb</strong>ç»™åšå®Œäº†ï¼ŒèŠ±äº†ä¸€å¤©æ—¶é—´ï¼Œå†…åŠ›ä¿®ç‚¼çš„è¿˜ä¸å¤Ÿå•Šã€‚è¿™é‡Œè®°å½•ä¸€ä¸‹è§£é¢˜æ€è·¯ï¼Œæ–¹ä¾¿ä»¥åå›é¡¾ï¼ŒåŒæ—¶ä¹Ÿç–ç†ä¸€ä¸‹è§£é¢˜ç”¨åˆ°çš„æŠ€æœ¯ç‚¹ã€‚æ³¨æ„ï¼šæœ¬æ–‡ä¸»è¦è®²è§£é¢˜çš„è¿‡ç¨‹å’Œæ€è·¯ï¼Œå¯åœ¨<a href="https://github.com/NagleZhang/Binary-Bomb#readme">Binary-Bombâ€™s Readme</a>ä¸­æŸ¥çœ‹ç›¸å…³çš„åŸºç¡€çŸ¥è¯†ã€‚</p>
<hr>
<h2 id="BinaryBombç®€ä»‹"><a href="#BinaryBombç®€ä»‹" class="headerlink" title="BinaryBombç®€ä»‹"></a><strong>BinaryBomb</strong>ç®€ä»‹</h2><p><strong>BinaryBomb</strong>æ˜¯<em>Carnegie Mellon University(å¡å†…åŸºÂ·æ¢…éš†å¤§å­¦)</em> CSè¯¾ä¸Šå‘å¸ƒçš„ä¸€é“ä½œä¸šï¼Œåœ¨<a href="http://csapp.cs.cmu.edu/public/labs.html">â€œLab Assignmentsâ€ page of Bryant and Oâ€™Hallaronâ€™s website</a>ä¸­å¯ä»¥æ‰¾åˆ°ä»¥ä¸‹å¯¹BinaryBombçš„ä»‹ç»:</p>
<ul>
<li><code>A &quot;binary bomb&quot; is a program provided to students as an object code file. When run, it prompts the user to type in 6 different strings. If any of these is incorrect, the bomb ``explodes,&#39;&#39; printing an error message and logging the event on a grading server. Students must ``defuse&#39;&#39; their own unique bomb by disassembling and reverse engineering the program to determine what the 6 strings should be. The lab teaches students to understand assembly language, and also forces them to learn how to use a debugger. It&#39;s also great fun. A legendary lab among the CMU undergrads.</code></li>
</ul>
<p>è¯‘æ–‡ï¼š</p>
<ul>
<li><code>â€œäºŒè¿›åˆ¶ç‚¸å¼¹â€æ˜¯ä½œä¸ºç›®æ ‡ä»£ç æ–‡ä»¶æä¾›ç»™å­¦ç”Ÿçš„ç¨‹åºã€‚ è¿è¡Œæ—¶ï¼Œå®ƒä¼šæç¤ºç”¨æˆ·è¾“å…¥ 6 ä¸ªä¸åŒçš„å­—ç¬¦ä¸²ã€‚ å¦‚æœå…¶ä¸­ä»»ä½•ä¸€ä¸ªä¸æ­£ç¡®ï¼Œç‚¸å¼¹å°±ä¼šâ€œçˆ†ç‚¸â€ï¼Œæ‰“å°é”™è¯¯æ¶ˆæ¯å¹¶å°†äº‹ä»¶è®°å½•åœ¨è¯„åˆ†æœåŠ¡å™¨ä¸Šã€‚ å­¦ç”Ÿå¿…é¡»é€šè¿‡å¯¹ç¨‹åºè¿›è¡Œåˆ†è§£å’Œé€†å‘å·¥ç¨‹æ¥ç¡®å®š 6 ä¸ªå­—ç¬¦ä¸²åº”è¯¥æ˜¯ä»€ä¹ˆï¼Œä»è€Œâ€œåŒ–è§£â€ä»–ä»¬è‡ªå·±ç‹¬ç‰¹çš„ç‚¸å¼¹ã€‚ å®éªŒå®¤æ•™å­¦ç”Ÿç†è§£æ±‡ç¼–è¯­è¨€ï¼Œå¹¶è¿«ä½¿ä»–ä»¬å­¦ä¹ å¦‚ä½•ä½¿ç”¨è°ƒè¯•å™¨ã€‚ è¿™ä¹Ÿå¾ˆæœ‰è¶£ã€‚ CMU æœ¬ç§‘ç”Ÿä¸­çš„ä¼ å¥‡å®éªŒå®¤ã€‚</code></li>
</ul>
<p>æ­£å¦‚ä»‹ç»æ‰€è¯´ï¼ŒBinaryBombéå¸¸ç”¨è¶£ï¼Œè™½ç„¶è¿™ä½œä¸šæ˜¯2013å¹´å‘å¸ƒçš„ï¼Œä½†æ—¶è‡³ä»Šæ—¥ï¼Œä»èƒ½ä»ä¸­å­¦åˆ°è®¸å¤šæœ‰ç”¨çš„ä¸œè¥¿ã€‚æ¯•ç«Ÿæˆ‘ä»¬ç°åœ¨ç”¨çš„è®¡ç®—æœºé™¤äº†ä»32ä½å˜æˆäº†64ä½å¤–ï¼Œå¯„å­˜å™¨ç§ç±»ï¼Œæ ˆç»“æ„ï¼Œå‡½æ•°è°ƒç”¨æœºåˆ¶ç­‰åŸºæœ¬æ²¡æœ‰å˜åŒ–ã€‚</p>
<hr>
<h2 id="GDB-pwndbgç®€ä»‹"><a href="#GDB-pwndbgç®€ä»‹" class="headerlink" title="GDB+pwndbgç®€ä»‹"></a>GDB+pwndbgç®€ä»‹</h2><ul>
<li><p><strong>GDB</strong>å³GNU Debuggerï¼Œæ˜¯GNUè½¯ä»¶ç³»ç»Ÿä¸­çš„<em>æ ‡å‡†è°ƒè¯•å™¨</em>ï¼Œæ­¤å¤–GDBä¹Ÿæ˜¯ä¸ªå…·æœ‰ç§»æºæ€§çš„è°ƒè¯•å™¨ï¼Œç»è¿‡ç§»æºéœ€æ±‚çš„è°ƒä¿®ä¸é‡æ–°ç¼–è¯‘ï¼Œå¦‚ä»Šè®¸å¤šçš„ç±»UNIXæ“ä½œç³»ç»Ÿä¸Šéƒ½å¯ä»¥ä½¿ç”¨GDBï¼Œè€Œç°æœ‰GDBæ‰€èƒ½æ”¯æŒè°ƒè¯•çš„ç¼–ç¨‹è¯­è¨€æœ‰Cã€C++ã€Pascalä»¥åŠFORTRANã€‚</p>
</li>
<li><p><a href="https://github.com/pwndbg/pwndbg"><strong>pwndbg</strong></a>æ˜¯ä¸€ä¸ª<em>GDBæ’ä»¶</em>ï¼Œå®ƒå¯ä»¥å‡å°‘ä½¿ç”¨ GDB è¿›è¡Œè°ƒè¯•ï¼Œé‡ç‚¹å…³æ³¨ä½çº§è½¯ä»¶å¼€å‘äººå‘˜ã€ç¡¬ä»¶é»‘å®¢ã€é€†å‘å·¥ç¨‹å¸ˆå’Œæ¼æ´åˆ©ç”¨å¼€å‘äººå‘˜æ‰€éœ€çš„åŠŸèƒ½ã€‚</p>
</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç”¨linuxè‡ªå¸¦çš„å¤è€è€Œåˆå¼ºå¤§çš„è°ƒè¯•å™¨é…ä¸Šä¸€ä¸ªç°ä»£çš„å¥½ç”¨æ’ä»¶ï¼Œåœ¨é¸½äº†ä¸€å¹´åç”¨ä¸€å¤©æ—¶é—´è§£å†³ä¸€ä¸ªå·®ä¸å¤šåå¹´å‰å‘å¸ƒçš„CSè¯¾ä½œä¸šã€‚ä¹Ÿè®¸å•ç”¨GDBæ‰æ˜¯è¿™ä¸ªä½œä¸šçš„åˆè¡·ï¼Œä½†è£¸GDBç”¨èµ·æ¥éå¸¸çš„éº»çƒ¦ï¼Œæ‰€æœ‰æƒ³çœ‹çš„ä¿¡æ¯éƒ½å¾—è‡ªå·±ä¸€ä¸ªä¸ªæ•²å‘½ä»¤ï¼Œå®Œäº†è¿˜è¿è¡Œä¸€æ­¥æ•²ä¸€æ¬¡ï¼Œç­‰åˆ°åšå®Œä½œä¸šï¼Œæ‰‹éƒ½èµ·èŒ§å–½ã€‚äººç”Ÿè‹¦çŸ­ï¼Œç”¨GDBå‰è®°å¾—ä¸Špwndbgã€‚</p>
<hr>
<h2 id="æœ¬äººè¿è¡Œç¯å¢ƒ"><a href="#æœ¬äººè¿è¡Œç¯å¢ƒ" class="headerlink" title="æœ¬äººè¿è¡Œç¯å¢ƒ"></a>æœ¬äººè¿è¡Œç¯å¢ƒ</h2><ul>
<li>OS: Arch Linux x86_64</li>
<li>Shell: zsh 5.8.1</li>
<li>Debuger: GNU gdb (GDB) 11.2 + pwndbg 1.0.3</li>
</ul>
<p>å…³äºpwndbgçš„å®‰è£…ï¼Œåœ¨<a href="https://github.com/pwndbg/pwndbg">github-pwndbg</a>ä¸Šæœ‰è¯¦ç»†æè¿°ï¼›æ‰€æœ‰linuxéƒ½æœ‰è‡ªå¸¦gdbï¼Œå»ºè®®ç”¨Ubuntuï¼ŒWindowsä¸Šå¯ä»¥ç”¨WSLæˆ–è€…MinGWï¼Œåˆæˆ–è€…ç›´æ¥ä¸Šè™šæ‹Ÿæœºï¼Œå…·ä½“æ“ä½œç½‘ä¸Šæ•™ç¨‹å¾ˆå¤šï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p>
<p>BinaryBombäºŒè¿›åˆ¶æ–‡ä»¶å¯ä»¥åœ¨<a href="https://github.com/qspidy/BinaryBomb">github-qspidy-BinaryBomb</a>ä¸Šä¸‹è½½ï¼Œé‡Œé¢æœ‰è®¸å¤šä¸åŒçš„BinaryBombï¼Œè™½ç„¶ç­”æ¡ˆä¸åŒï¼Œä½†è§£ç­”çš„è¿‡ç¨‹åŸºæœ¬ä¸€æ ·ã€‚æ‡’äººå‘½ä»¤ï¼š<code>git clone https://github.com/qspidy/BinaryBomb</code></p>
<p>åŒæ—¶é™„ä¸Š<a href="http://csapp.cs.cmu.edu/3e/bomb.tar">å®˜æ–¹bombä¸‹è½½é“¾æ¥</a>ã€‚ä¸‹è½½å®Œåœ¨ä¸‹è½½æ–‡ä»¶çš„ç›®å½•æ‰§è¡Œ<code>tar xvf bomb.tar</code>å³å¯è§£å‹ã€‚</p>
<hr>
<h2 id="ç”¨åˆ°çš„gdbå‘½ä»¤ä¸€è§ˆè¡¨"><a href="#ç”¨åˆ°çš„gdbå‘½ä»¤ä¸€è§ˆè¡¨" class="headerlink" title="ç”¨åˆ°çš„gdbå‘½ä»¤ä¸€è§ˆè¡¨"></a>ç”¨åˆ°çš„gdbå‘½ä»¤ä¸€è§ˆè¡¨</h2><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>r</td>
<td>å³runï¼Œå¼€å§‹è¿è¡Œè°ƒè¯•çš„ç¨‹åº</td>
</tr>
<tr>
<td>x</td>
<td>æ£€æŸ¥å†…å­˜(Examine memory)ï¼Œå°†æŒ‡å®šåœ°å€çš„å†…å®¹æŒ‰æŒ‡å®šæ ¼å¼å’Œé•¿åº¦è¾“å‡º</td>
</tr>
<tr>
<td>b</td>
<td>å³breakï¼Œåœ¨æŒ‡å®šä½ç½®è®¾ç½®æ–­ç‚¹</td>
</tr>
<tr>
<td>c</td>
<td>å³continueï¼Œfgï¼Œä»å½“å‰å¼€å§‹ç»§ç»­è¿è¡Œ</td>
</tr>
<tr>
<td>h</td>
<td>å³helpï¼Œæ˜¾ç¤ºå‘½ä»¤çš„å¸®åŠ©è¯´æ˜ï¼Œå–„ç”¨helpå‘½ä»¤æ˜¯å˜å¼ºçš„ç¬¬ä¸€æ­¥</td>
</tr>
<tr>
<td>si</td>
<td>å³stepiï¼Œæ‰§è¡Œä¸€æ¡æ±‡ç¼–æŒ‡ä»¤ï¼ˆé‡åˆ°å‡½æ•°è·³å…¥ï¼‰</td>
</tr>
<tr>
<td>ni</td>
<td>å³nextiï¼Œæ‰§è¡Œä¸€æ¡æ±‡ç¼–æŒ‡ä»¤ï¼ˆé‡åˆ°å‡½æ•°è·³è¿‡ï¼‰</td>
</tr>
<tr>
<td>bt</td>
<td>å³backtraceï¼Œè¾“å‡ºæ‰€æœ‰å›æº¯æ ˆå¸§ï¼Œåˆç§°è°ƒç”¨å †æ ˆ</td>
</tr>
<tr>
<td>fin</td>
<td>å³finishï¼Œæ‰§è¡Œå®Œå½“å‰å‡½æ•°å¹¶break</td>
</tr>
<tr>
<td>disas</td>
<td>å³disassembleï¼Œåæ±‡ç¼–æŒ‡å®šå†…å­˜åŒºåŸŸ</td>
</tr>
<tr>
<td>stack</td>
<td>è¾“å‡ºå½“å‰æ´»åŠ¨è®°å½•çš„æ ˆä¿¡æ¯</td>
</tr>
<tr>
<td>info r</td>
<td>å³info registersï¼Œåˆ—å‡ºå¯„å­˜å™¨å’Œå…¶ä¸­çš„å†…å®¹</td>
</tr>
</tbody></table>
<hr>
<h2 id="å¼€å§‹è°ƒè¯•BinaryBomb"><a href="#å¼€å§‹è°ƒè¯•BinaryBomb" class="headerlink" title="å¼€å§‹è°ƒè¯•BinaryBomb"></a>å¼€å§‹è°ƒè¯•BinaryBomb</h2><ul>
<li>åœ¨BinaryBombäºŒè¿›åˆ¶æ–‡ä»¶ç›®å½•ä¸‹æ‰§è¡Œ<code>gdb bomb</code>å¼€å§‹è°ƒè¯•ï¼š<img src="/2022/04/21/binary-bomb/2022-04-22_15-31.png" class="" title="gdb bomb output"></li>
<li>ä¸ªäººä¹ æƒ¯å…ˆæŠŠæ‰€æœ‰çš„phasesç»™åæ±‡ç¼–å‡ºæ¥å¤åˆ¶åˆ°è®°äº‹æœ¬ï¼Œæ–¹ä¾¿ä¹‹åæŸ¥çœ‹å’Œç›¸å…³åœ°å€çš„å¤åˆ¶ã€‚æ‰§è¡Œ<code>disas phase_1</code>æ˜¾ç¤º<strong>phase_1</strong>çš„åæ±‡ç¼–ï¼š<img src="/2022/04/21/binary-bomb/2022-04-22_15-42.png" class="" title="disassemble **phase_1**"></li>
</ul>
<h3 id="phase-1"><a href="#phase-1" class="headerlink" title="phase_1"></a><strong>phase_1</strong></h3><ol>
<li>ç›´æ¥è¿›å…¥æ­£é¢˜ï¼Œä¸€åˆ‡å‡†å¤‡å°±ç»ªåï¼Œåœ¨<strong>phase_1</strong>å‡½æ•°å…¥å£å¤„ä¸‹æ–­ç‚¹ï¼š<code>b phase_1</code>ï¼Œæ‰§è¡Œç¨‹åº<code>r</code>ï¼š<img src="/2022/04/21/binary-bomb/2022-04-22_15-55.png" class="" title="ä¸‹æ–­ç‚¹ï¼Œè¿è¡Œ"></li>
<li>å› ä¸ºè¿˜ä¸çŸ¥é“æ­£ç¡®ç­”æ¡ˆï¼Œè¿™é‡Œéšä¾¿è¾“å…¥ä¸€ä¸²å­—ç¬¦<code>helloworld</code>ï¼Œç»§ç»­æ‰§è¡Œ<code>c</code>ï¼Œè¿™æ—¶<strong>pwndbg</strong>çš„ä½œç”¨å°±å¼€å§‹ä½“ç°äº†ï¼Œæ¯æ¬¡è¿è¡Œåˆ°æ–­ç‚¹åœä¸‹æ—¶ï¼Œéƒ½é»˜è®¤ä¼šæ˜¾ç¤ºä¸‹åˆ—ä¿¡æ¯ï¼š</li>
</ol>
<ul>
<li><strong>Registers</strong>ï¼Œå³å¯„å­˜å™¨ä¿¡æ¯ï¼Œä¸gdbä¸­è¿è¡Œ<code>info r</code>è¾“å‡ºç±»ä¼¼ï¼š<img src="/2022/04/21/binary-bomb/2022-04-22_16-29.png" class="" title="pwndbg registers"></li>
<li><strong>Disasm</strong>ï¼Œå³åæ±‡ç¼–ä¿¡æ¯ï¼Œä¸gdbä¸­è¿è¡Œ<code>disas</code>è¾“å‡ºç±»ä¼¼ï¼š<img src="/2022/04/21/binary-bomb/2022-04-22_16-30.png" class="" title="pwndbg disasm"></li>
<li><strong>Stack</strong>ï¼Œå³å½“å‰æ´»åŠ¨è®°å½•çš„æ ˆä¿¡æ¯ï¼Œä¸gdbä¸­è¿è¡Œ<code>stack</code>è¾“å‡ºç±»ä¼¼ï¼š<img src="/2022/04/21/binary-bomb/2022-04-22_16-30_1.png" class="" title="pwndbg stack"></li>
<li><strong>Backtrack</strong>ï¼Œå³å †æ ˆå›æº¯ï¼Œæ˜¾ç¤ºçº¿ç¨‹çš„å‡½æ•°è°ƒç”¨å †æ ˆï¼Œä¸gdbä¸­è¿è¡Œ<code>bt</code>è¾“å‡ºç±»ä¼¼<img src="/2022/04/21/binary-bomb/2022-04-22_16-30_2.png" class="" title="pwndbg backtrace"></li>
</ul>
<ol start="3">
<li>æ³¨æ„è¿™å¥ï¼š<code>0x400e96 &lt;phase_1+9&gt;     call   strings_not_equal</code>ï¼Œä»å‡½æ•°åèƒ½çœ‹å‡ºæ˜¯è°ƒç”¨äº†ä¸€ä¸ªæ¯”è¾ƒå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰çš„å‡½æ•°ï¼Œé‚£æ¯”è¾ƒçš„æ˜¯å“ªä¸¤ä¸ªå­—ç¬¦ä¸²å‘¢ï¼Ÿä¸Šä¸€å¥æŒ‡ä»¤æ˜¯<code>0x400e91 &lt;phase_1+4&gt;     mov    esi, 0x402490</code>ï¼Œå¯ä»¥åˆç†æ€€ç–‘åœ°å€<code>0x402490</code>æ˜¯å…¶ä¸­ä¸€ä¸ªå­—ç¬¦ä¸²é¦–åœ°å€ï¼Œä¸”ä½œä¸ºå‚æ•°ä¼ å…¥è¯¥å‡½æ•°ï¼Œæ‰§è¡Œ<code>x/s 0x402490</code>å°è¯•ä»¥å­—ç¬¦ä¸²æ ¼å¼è¾“å‡ºè¯¥åœ°å€ä¿¡æ¯ï¼š<img src="/2022/04/21/binary-bomb/2022-04-22_18-45.png" class="" title="x&#x2F;s 0x402490">
å¥½å®¶ä¼™ï¼Œçœ‹æ¥è¿™ä¸ªå°±æ˜¯ç­”æ¡ˆäº†ã€‚</li>
<li>ä½†å‡å¦‚æ²¡æœ‰ç»éªŒï¼Œä¸çŸ¥é“åº”è¯¥çœ‹åœ°å€<code>0x402490</code>çš„ä¿¡æ¯å‘¢ï¼Ÿé‚£åªèƒ½ä¸€æ­¥æ­¥è¿è¡Œçœ‹çœ‹äº†ï¼Œè¿ç»­æ‰§è¡Œ<code>si</code>ç›´åˆ°<code>strings_not_equal</code>å‡½æ•°ï¼Œå¯ä»¥æ³¨æ„åˆ°ä¸‹é¢è¿™ä¸€æ®µï¼š<img src="/2022/04/21/binary-bomb/2022-04-22_18-55.png" class="" title="call strings_not_equal">
å¾ˆæ˜æ˜¾ï¼Œå‚ä¸æ¯”è¾ƒçš„ä¸¤ä¸ªå­—ç¬¦ä¸²åˆ†åˆ«æ˜¯<code>rdi</code>æŒ‡å‘çš„<code>helloworld</code>å’Œ<code>rsi</code>æŒ‡å‘çš„<code>Why make trillions when we could make... billions?</code>ï¼Œå‰è€…æ˜¯ä¹‹å‰éšä¾¿è¾“çš„ï¼Œåè€…æ˜¯ç¨‹åºé‡Œå†™å¥½çš„ã€‚</li>
<li>åé¢çš„å‡ å¥æ±‡ç¼–æ˜¯åˆ¤æ–­eaxå³strings_not_equalå‡½æ•°çš„è¿”å›å€¼æ˜¯å¦ä¸º0ï¼Œä¸º0åˆ™è¯´æ˜ä¸¤å­—ç¬¦ä¸²ç›¸ç­‰ï¼Œ<strong>phase_1</strong>é€€å‡ºï¼Œå¦åˆ™æ‰§è¡Œåˆ°<code>explode_bomb</code>å‡½æ•°ï¼ŒBOOM!!!</li>
</ol>
<h3 id="phase-2"><a href="#phase-2" class="headerlink" title="phase_2"></a><strong>phase_2</strong></h3><ol>
<li><p><strong>phase_1</strong>é¡¶å¤šç®—æ˜¯çƒ­èº«ï¼Œæ¥ä¸‹æ¥çš„æ‰æ˜¯çœŸæ­£çš„puzzleã€‚å…ˆçœ‹ä¸€çœ¼<strong>phase_2</strong>çš„åæ±‡ç¼–ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Dump of assembler code for function phase_2:</span><br><span class="line">   0x0000000000400ea9 &lt;+0&gt;:     push   rbp</span><br><span class="line">   0x0000000000400eaa &lt;+1&gt;:     push   rbx</span><br><span class="line">   0x0000000000400eab &lt;+2&gt;:     sub    rsp,0x28</span><br><span class="line">   0x0000000000400eaf &lt;+6&gt;:     mov    rax,QWORD PTR fs:0x28</span><br><span class="line">   0x0000000000400eb8 &lt;+15&gt;:    mov    QWORD PTR [rsp+0x18],rax</span><br><span class="line">   0x0000000000400ebd &lt;+20&gt;:    xor    eax,eax</span><br><span class="line">   0x0000000000400ebf &lt;+22&gt;:    mov    rsi,rsp</span><br><span class="line">   0x0000000000400ec2 &lt;+25&gt;:    call   0x40152b &lt;read_six_numbers&gt;</span><br><span class="line">   0x0000000000400ec7 &lt;+30&gt;:    cmp    DWORD PTR [rsp],0x0</span><br><span class="line">   0x0000000000400ecb &lt;+34&gt;:    jne    0x400ed4 &lt;phase_2+43&gt;</span><br><span class="line">   0x0000000000400ecd &lt;+36&gt;:    cmp    DWORD PTR [rsp+0x4],0x1</span><br><span class="line">   0x0000000000400ed2 &lt;+41&gt;:    je     0x400ed9 &lt;phase_2+48&gt;</span><br><span class="line">   0x0000000000400ed4 &lt;+43&gt;:    call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000400ed9 &lt;+48&gt;:    mov    rbx,rsp</span><br><span class="line">   0x0000000000400edc &lt;+51&gt;:    lea    rbp,[rsp+0x10]</span><br><span class="line">   0x0000000000400ee1 &lt;+56&gt;:    mov    eax,DWORD PTR [rbx+0x4]</span><br><span class="line">   0x0000000000400ee4 &lt;+59&gt;:    add    eax,DWORD PTR [rbx]</span><br><span class="line">   0x0000000000400ee6 &lt;+61&gt;:    cmp    DWORD PTR [rbx+0x8],eax</span><br><span class="line">   0x0000000000400ee9 &lt;+64&gt;:    je     0x400ef0 &lt;phase_2+71&gt;</span><br><span class="line">   0x0000000000400eeb &lt;+66&gt;:    call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000400ef0 &lt;+71&gt;:    add    rbx,0x4</span><br><span class="line">   0x0000000000400ef4 &lt;+75&gt;:    cmp    rbx,rbp</span><br><span class="line">   0x0000000000400ef7 &lt;+78&gt;:    jne    0x400ee1 &lt;phase_2+56&gt;</span><br><span class="line">   0x0000000000400ef9 &lt;+80&gt;:    mov    rax,QWORD PTR [rsp+0x18]</span><br><span class="line">   0x0000000000400efe &lt;+85&gt;:    xor    rax,QWORD PTR fs:0x28</span><br><span class="line">   0x0000000000400f07 &lt;+94&gt;:    je     0x400f0e &lt;phase_2+101&gt;</span><br><span class="line">   0x0000000000400f09 &lt;+96&gt;:    call   0x400b00 &lt;__stack_chk_fail@plt&gt;</span><br><span class="line">   0x0000000000400f0e &lt;+101&gt;:   add    rsp,0x28</span><br><span class="line">   0x0000000000400f12 &lt;+105&gt;:   pop    rbx</span><br><span class="line">   0x0000000000400f13 &lt;+106&gt;:   pop    rbp</span><br><span class="line">   0x0000000000400f14 &lt;+107&gt;:   ret    </span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure>
<p>åŒæ ·ï¼Œåœ¨<strong>phase_2</strong>å‡½æ•°å…¥å£ä¸‹æ–­ç‚¹<code>b phase_2</code>ï¼Œç»§ç»­æ‰§è¡Œ<code>c</code>ï¼Œå› ä¸ºæ³¨æ„åˆ°<strong>phase_2</strong>çš„åæ±‡ç¼–ä¸­æœ‰è°ƒç”¨ä¸€ä¸ªå«<code>read_six_numbers</code>çš„å‡½æ•°ï¼Œæ‰€ä»¥è¾“å…¥çš„åº”è¯¥æ˜¯å…­ä¸ªæ•°å­—ï¼Œè¿™é‡Œè¾“å…¥äº†<code>1 2 3 4 5 6</code>ï¼Œå› ä¸ºè®¡ç®—æœºå†…é€šå¸¸ä¸ä¼šæœ‰è¿™ç§ç®€å•çš„æ•°å­—ï¼Œæ‰€ä»¥è¿™æ ·è¾“å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§‚å¯Ÿå“ªäº›æŒ‡ä»¤å¯¹è¾“å…¥çš„å“ªäº›å‚æ•°è¿›è¡Œäº†å¤„ç†ï¼Œæ›´æ–¹ä¾¿è§‚å¯Ÿç¨‹åºé€»è¾‘ã€‚</p>
</li>
<li><p>å¤šæ¬¡æ‰§è¡Œå‘½ä»¤<code>si</code>æˆ–ç›´æ¥<code>ni 8</code>(æ‰§è¡Œ8æ¬¡<code>ni</code>)åˆ°<code>read_six_numbers</code>å‡½æ•°ç»“æŸï¼š</p>
<img src="/2022/04/21/binary-bomb/2.1.png" class="" title="**phase_2** read_six_numbers">
<p><code>cmp    dword ptr [rsp], 0</code>ä¸€å¥è¡¨ç¤ºå°†<code>rsp</code>å¯„å­˜å™¨æŒ‡å‘çš„å†…å®¹ä»¥4å­—èŠ‚(dword)æ ¼å¼è§£é‡Šï¼Œç›¸å½“äºintå‹ï¼Œå†ä¸å³è¾¹çš„0ç›¸å‡(sub)ï¼Œå¹¶æ”¹å˜ç›¸åº”çš„æ ‡å¿—ä½ã€‚çœ‹ä¸€ä¸‹å½“å‰çš„æ ˆä¿¡æ¯ï¼š</p>
<img src="/2022/04/21/binary-bomb/2.2.png" class="" title="**phase_2** stack">
<p>å¯ä»¥çœ‹åˆ°å½“å‰çš„æ ˆé‡Œå­˜çš„æ˜¯ä¹‹å‰è¾“å…¥çš„<code>1 2 3 4 5 6</code>ï¼Œè¿™æ ·çœ‹å¯èƒ½ä¸æ˜¯å¾ˆç›´è§‚ï¼Œè¾“å…¥<code>x/10wx $rsp</code>æ˜¾ç¤º10ä¸ªã€åœ°å€ä»<code>rsp</code>å¼€å§‹è¿ç»­çš„é•¿åº¦ä¸º4å­—èŠ‚çš„å†…å­˜ä¿¡æ¯ï¼š</p>
<img src="/2022/04/21/binary-bomb/2.3.png" class="" title="**phase_2**">
<p>è¿™é‡Œå°±èƒ½ç›´è§‚çš„çœ‹åˆ°æ ˆé‡Œå­˜å‚¨çš„æ•°æ®æ ¼å¼äº†ï¼Œå…¶ä¸­<code>dword ptr [rsp]</code>æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°å³<code>0x00000001</code>ï¼Œ<code>dword ptr [rsp+4]</code>æ˜¯ç¬¬äºŒä¸ªå‚æ•°<code>0x00000002</code>ï¼Œ<code>dword ptr [rsp+8]</code>æ˜¯ç¬¬ä¸‰ä¸ªå‚æ•°<code>0x00000003</code>ï¼Œä»¥æ­¤ç±»æ¨ã€‚è€Œ<code>dword ptr [rsp]</code>æŒ‡çš„æ­£æ˜¯æ ˆé¡¶çš„4å­—èŠ‚ï¼Œä¹Ÿå³ä¹‹å‰è¾“å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚å®ƒå’Œ0ä¸€æ¯”è¾ƒï¼Œä¸ç›¸ç­‰ï¼Œä¾¿è·³åˆ°äº†<code>explode_bomb</code>å‡½æ•°ã€‚æ‰€ä»¥æ¨å‡ºç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥ä¸º0ã€‚</p>
</li>
<li><p>çŸ¥é“äº†ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥é€‰æ‹©é‡æ–°è¿è¡Œï¼ŒæŠŠè¾“å…¥å‚æ•°çš„ç¬¬ä¸€ä¸ªæ”¹ä¸º0ï¼Œä¹Ÿå¯ä»¥å…ˆä¸ç®¡å®ƒï¼Œæ‰‹åŠ¨è·³è¿‡<code>explode_bomb</code>å‡½æ•°ç»§ç»­è¿è¡Œã€‚æ‰¾åˆ°<code>jne    phase_2+43</code>ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ä¸º<code>0x400ecd</code>ï¼Œç„¶åæ‰§è¡Œ<code>set $rip=0x400ecd</code>è®¾ç½®<code>rip</code>å¯„å­˜å™¨å€¼ä¸ºè¯¥åœ°å€ï¼Œå› ä¸º<code>rip</code>(æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨)å§‹ç»ˆå­˜çš„æ˜¯ä¸‹ä¸€æ¡å³å°†æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€ï¼š</p>
<img src="/2022/04/21/binary-bomb/2.4.png" class="" title="**phase_2**">
<p>å‘ç°è¿™ä¸€æ®µä¸ä¸Šä¸€æ®µä»£ç ç±»ä¼¼ï¼Œå¯çŸ¥ç¬¬äºŒä¸ªå‚æ•°åº”è¯¥ä¸º1ã€‚</p>
</li>
<li><p>åŒæ ·çš„æ–¹æ³•è·³è¿‡<code>explode_bomb</code>å‡½æ•°ï¼Œä»è¿™é‡Œå¼€å§‹å°±æœ‰å¯¹å‚æ•°è¿›è¡Œè®¡ç®—çš„æ“ä½œäº†ï¼Œä¹‹å‰å…¨æ˜¯å°†å‚æ•°å’ŒæŸä¸ªå­—ç¬¦æˆ–æ•°å­—æ¯”è¾ƒï¼Œå¾ˆå®¹æ˜“å¾ˆè·å¾—ç­”æ¡ˆã€‚ç»§ç»­ä¸€æ­¥æ­¥æ‰§è¡Œï¼Œå‘ç°è¿™æ ·ä¸€æ®µï¼š</p>
<img src="/2022/04/21/binary-bomb/2.5.png" class="" title="**phase_2**">
<p>æ—¢ç„¶æœ‰æ¡ä»¶è·³è½¬ï¼Œå°±å­˜åœ¨åˆ†æ”¯ï¼Œè¿™é‡Œpwndbgçš„è¾“å‡ºé»˜è®¤åªæ˜¾ç¤ºå°†ä¼šè¿è¡Œçš„æŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒé¢„å…ˆæ‰§è¡Œäº†ä¸€ä¸‹ï¼Œå¸®ä½ é¢„æµ‹å¥½äº†æ¥ä¸‹æ¥å‡ æ­¥çš„æŒ‡ä»¤ã€‚ä¸ºæŸ¥çœ‹pwndbgçœç•¥æ‰çš„åæ±‡ç¼–ä»£ç ï¼Œæ‰§è¡Œ<code>disas</code>è¾“å‡ºå½“å‰å‡½æ•°åæ±‡ç¼–ï¼Œå½“å‰æŒ‡ä»¤ä½ç½®ä¼šæœ‰ç®­å¤´æ ‡æ³¨ï¼š</p>
<img src="/2022/04/21/binary-bomb/2.6.png" class="" title="**phase_2**">
<p>å¾ˆæ˜æ˜¾<code>cmp    DWORD PTR [rbx+0x8],eax</code>çš„ç»“æœåº”è¯¥ä¸ºç›¸ç­‰ï¼Œå…¶ä¸­å‰è€…<code>DWORD PTR [rbx+0x8]</code>æ˜¯ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œ<code>eax</code>å­˜çš„æ˜¯å‰å‡ è¡ŒæŒ‡ä»¤çš„ç»“æœï¼Œå†çœ‹å‰å‡ è¡ŒæŒ‡ä»¤ï¼š</p>
<img src="/2022/04/21/binary-bomb/2.7.png" class="" title="**phase_2**">
<p>å¯¹<code>rbp</code>å’Œ<code>rbx</code>è¿›è¡Œèµ‹å€¼ï¼Œç„¶åè®¡ç®—ç¬¬ä¸€å‚æ•°ä¸ç¬¬äºŒå‚æ•°çš„å’Œå¹¶èµ‹äº<code>eax</code>ï¼Œæ‰€ä»¥<code>eax</code>çš„å€¼åº”è¯¥ä¸º1ï¼Œå³ç¬¬ä¸‰ä¸ªå‚æ•°åº”è¯¥ä¸º1ã€‚<br>è¿™é‡Œæœ‰ä¸€ä¸ªå°ç»†èŠ‚ï¼Œå› ä¸º<code>rbp</code>å’Œ<code>rbx</code>çš„æ—§å€¼åœ¨è¿™é‡Œè¢«è¦†ç›–äº†ï¼Œæ‰€ä»¥åœ¨å‡½æ•°å¼€å¤´æœ‰è¿™æ ·ä¸€å¥å°†<code>rbp</code>å’Œ<code>rbx</code>çš„æ—§å€¼ä¿å­˜åœ¨æ ˆé‡Œï¼š</p>
<img src="/2022/04/21/binary-bomb/2.8.png" class="" title="**phase_2**">
<p>å¹¶åœ¨å‡½æ•°è¿”å›å‰è¿›è¡Œæ¢å¤ï¼š</p>
<img src="/2022/04/21/binary-bomb/2.9.png" class="" title="**phase_2**">
<p>ç»å…¸çš„ä¿å­˜ç°åœºå’Œæ¢å¤ç°åœºæ“ä½œï¼Œè¿™åœ¨ä¹‹åä¹Ÿä¼šç»å¸¸çœ‹åˆ°ã€‚</p>
</li>
<li><p>ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œå‘ç°æœ‰è¿™æ ·ä¸‰è¡ŒæŒ‡ä»¤ï¼š</p>
<img src="/2022/04/21/binary-bomb/2.10.png" class="" title="**phase_2**">
<p><code>rbp</code>å’Œ<code>rbx</code>åˆ†åˆ«æ˜¯ä¹‹å‰èµ‹çš„<code>rsp+0x10</code>å’Œ<code>rsp</code>ï¼Œå³ç¬¬äº”ä¸ªå‚æ•°å’Œç¬¬ä¸€ä¸ªå‚æ•°çš„åœ°å€ï¼Œå¯¹<code>rbx</code>åŠ 4å³è®©<code>rbx</code>æŒ‡å‘ç¬¬ä¸‹ä¸€ä¸ªå‚æ•°ï¼Œç„¶åæ¯”è¾ƒä¸€ä¸‹çœ‹<code>rbx</code>æ˜¯ä¸æ˜¯å·²ç»åˆ°äº†ç¬¬äº”ä¸ªå‚æ•°ï¼Œä¸æ˜¯åˆ™è·³åˆ°ä¹‹å‰çš„<code>0x400ee1 &lt;phase_2+56&gt;    mov    eax, dword ptr [rbx + 4]</code>ä½ç½®æ‰§è¡Œï¼Œå¦åˆ™é€€å‡ºå¾ªç¯ã€‚å¾ªç¯é‡Œæ‰§è¡Œçš„å³æ˜¯ä¸Šä¸€æ­¥çš„å†…å®¹ï¼šæ£€æŸ¥ç¬¬xä¸ªå‚æ•°ä¸ç¬¬x+1ä¸ªå‚æ•°çš„å’Œæ˜¯å¦ç­‰äºç¬¬x+2ä¸ªå‚æ•°ï¼Œxå€¼ä¸º1åˆ°5ã€‚è‡³æ­¤ï¼Œ<strong>phase_2</strong>å·²è§£å†³ã€‚</p>
</li>
</ol>
<h3 id="phase-3"><a href="#phase-3" class="headerlink" title="phase_3"></a><strong>phase_3</strong></h3><ol>
<li><p>åˆ°è¿™é‡ŒåŸºæœ¬ä¸Šå·²ç»ä¸Šæ‰‹äº†ï¼Œä¸åŒäº<strong>phase_2</strong>çš„æ•°å­¦è®¡ç®—ï¼Œ<strong>phase_3</strong>çš„é‡ç‚¹åœ¨äºç†æ¸…ç¨‹åºæ‰§è¡Œé€»è¾‘ï¼Œæ‰¾å‡ºå…³é”®ä»£ç ã€‚åŒæ ·é™„ä¸Š<strong>phase_3</strong>çš„åæ±‡ç¼–ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Dump of assembler code for function phase_3:</span><br><span class="line">   0x0000000000400f15 &lt;+0&gt;:     sub    rsp,0x28</span><br><span class="line">   0x0000000000400f19 &lt;+4&gt;:     mov    rax,QWORD PTR fs:0x28</span><br><span class="line">   0x0000000000400f22 &lt;+13&gt;:    mov    QWORD PTR [rsp+0x18],rax</span><br><span class="line">   0x0000000000400f27 &lt;+18&gt;:    xor    eax,eax</span><br><span class="line">   0x0000000000400f29 &lt;+20&gt;:    lea    r8,[rsp+0x14]</span><br><span class="line">   0x0000000000400f2e &lt;+25&gt;:    lea    rcx,[rsp+0xf]</span><br><span class="line">   0x0000000000400f33 &lt;+30&gt;:    lea    rdx,[rsp+0x10]</span><br><span class="line">   0x0000000000400f38 &lt;+35&gt;:    mov    esi,0x4024ee</span><br><span class="line">   0x0000000000400f3d &lt;+40&gt;:    call   0x400bb0 &lt;__isoc99_sscanf@plt&gt;</span><br><span class="line">   0x0000000000400f42 &lt;+45&gt;:    cmp    eax,0x2</span><br><span class="line">   0x0000000000400f45 &lt;+48&gt;:    jg     0x400f4c &lt;phase_3+55&gt;</span><br><span class="line">   0x0000000000400f47 &lt;+50&gt;:    call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000400f4c &lt;+55&gt;:    cmp    DWORD PTR [rsp+0x10],0x7</span><br><span class="line">   0x0000000000400f51 &lt;+60&gt;:    ja     0x401053 &lt;phase_3+318&gt;</span><br><span class="line">   0x0000000000400f57 &lt;+66&gt;:    mov    eax,DWORD PTR [rsp+0x10]</span><br><span class="line">=&gt; 0x0000000000400f5b &lt;+70&gt;:    jmp    QWORD PTR [rax*8+0x402500]</span><br><span class="line">   0x0000000000400f62 &lt;+77&gt;:    mov    eax,0x69</span><br><span class="line">   0x0000000000400f67 &lt;+82&gt;:    cmp    DWORD PTR [rsp+0x14],0x33c</span><br><span class="line">   0x0000000000400f6f &lt;+90&gt;:    je     0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x0000000000400f75 &lt;+96&gt;:    call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000400f7a &lt;+101&gt;:   mov    eax,0x69</span><br><span class="line">   0x0000000000400f7f &lt;+106&gt;:   jmp    0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x0000000000400f84 &lt;+111&gt;:   mov    eax,0x66</span><br><span class="line">   0x0000000000400f89 &lt;+116&gt;:   cmp    DWORD PTR [rsp+0x14],0x30b</span><br><span class="line">   0x0000000000400f91 &lt;+124&gt;:   je     0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x0000000000400f97 &lt;+130&gt;:   call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000400f9c &lt;+135&gt;:   mov    eax,0x66</span><br><span class="line">   0x0000000000400fa1 &lt;+140&gt;:   jmp    0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x0000000000400fa6 &lt;+145&gt;:   mov    eax,0x71</span><br><span class="line">   0x0000000000400fab &lt;+150&gt;:   cmp    DWORD PTR [rsp+0x14],0x2d5</span><br><span class="line">   0x0000000000400fb3 &lt;+158&gt;:   je     0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x0000000000400fb9 &lt;+164&gt;:   call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000400fbe &lt;+169&gt;:   mov    eax,0x71</span><br><span class="line">   0x0000000000400fc3 &lt;+174&gt;:   jmp    0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x0000000000400fc8 &lt;+179&gt;:   mov    eax,0x7a</span><br><span class="line">   0x0000000000400fcd &lt;+184&gt;:   cmp    DWORD PTR [rsp+0x14],0x235</span><br><span class="line">   0x0000000000400fd5 &lt;+192&gt;:   je     0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x0000000000400fdb &lt;+198&gt;:   call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000400fe0 &lt;+203&gt;:   mov    eax,0x7a</span><br><span class="line">   0x0000000000400fe5 &lt;+208&gt;:   jmp    0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x0000000000400fe7 &lt;+210&gt;:   mov    eax,0x6c</span><br><span class="line">   0x0000000000400fec &lt;+215&gt;:   cmp    DWORD PTR [rsp+0x14],0x192</span><br><span class="line">   0x0000000000400ff4 &lt;+223&gt;:   je     0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x0000000000400ff6 &lt;+225&gt;:   call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000400ffb &lt;+230&gt;:   mov    eax,0x6c</span><br><span class="line">   0x0000000000401000 &lt;+235&gt;:   jmp    0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x0000000000401002 &lt;+237&gt;:   mov    eax,0x70</span><br><span class="line">   0x0000000000401007 &lt;+242&gt;:   cmp    DWORD PTR [rsp+0x14],0x1a6</span><br><span class="line">   0x000000000040100f &lt;+250&gt;:   je     0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x0000000000401011 &lt;+252&gt;:   call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000401016 &lt;+257&gt;:   mov    eax,0x70</span><br><span class="line">   0x000000000040101b &lt;+262&gt;:   jmp    0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x000000000040101d &lt;+264&gt;:   mov    eax,0x73</span><br><span class="line">   0x0000000000401022 &lt;+269&gt;:   cmp    DWORD PTR [rsp+0x14],0x325</span><br><span class="line">   0x000000000040102a &lt;+277&gt;:   je     0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x000000000040102c &lt;+279&gt;:   call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000401031 &lt;+284&gt;:   mov    eax,0x73</span><br><span class="line">   0x0000000000401036 &lt;+289&gt;:   jmp    0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x0000000000401038 &lt;+291&gt;:   mov    eax,0x6d</span><br><span class="line">   0x000000000040103d &lt;+296&gt;:   cmp    DWORD PTR [rsp+0x14],0x217</span><br><span class="line">   0x0000000000401045 &lt;+304&gt;:   je     0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x0000000000401047 &lt;+306&gt;:   call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x000000000040104c &lt;+311&gt;:   mov    eax,0x6d</span><br><span class="line">   0x0000000000401051 &lt;+316&gt;:   jmp    0x40105d &lt;phase_3+328&gt;</span><br><span class="line">   0x0000000000401053 &lt;+318&gt;:   call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000401058 &lt;+323&gt;:   mov    eax,0x79</span><br><span class="line">   0x000000000040105d &lt;+328&gt;:   cmp    al,BYTE PTR [rsp+0xf]</span><br><span class="line">   0x0000000000401061 &lt;+332&gt;:   je     0x401068 &lt;phase_3+339&gt;</span><br><span class="line">   0x0000000000401063 &lt;+334&gt;:   call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000401068 &lt;+339&gt;:   mov    rax,QWORD PTR [rsp+0x18]</span><br><span class="line">   0x000000000040106d &lt;+344&gt;:   xor    rax,QWORD PTR fs:0x28</span><br><span class="line">   0x0000000000401076 &lt;+353&gt;:   je     0x40107d &lt;phase_3+360&gt;</span><br><span class="line">   0x0000000000401078 &lt;+355&gt;:   call   0x400b00 &lt;__stack_chk_fail@plt&gt;</span><br><span class="line">   0x000000000040107d &lt;+360&gt;:   add    rsp,0x28</span><br><span class="line">   0x0000000000401081 &lt;+364&gt;:   ret</span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure>
<p>ä¸åƒ<strong>phase_2</strong>ä¸­æœ‰<code>read_six_numbers</code>ï¼Œ<strong>phase_3</strong>æ²¡æ³•ç›´æ¥ä»åæ±‡ç¼–ä¸­çª¥è§è¾“å…¥çš„å‚æ•°æ ¼å¼ï¼Œé‚£å°±æš‚æ—¶è¾“<code>mrorange</code>å¥½äº†ï¼Œç„¶åä¸€æ­¥æ­¥æ‰§è¡Œï¼Œå¹¶è§‚å¯Ÿpwndbgè¾“å‡ºçš„registersä¿¡æ¯ï¼Œç›´åˆ°<code>scanf</code>å‡½æ•°ï¼š</p>
<img src="/2022/04/21/binary-bomb/3.1.png" class="" title="**phase_3**">
<p>pwndbgç›´æ¥å°†ä¼ å…¥<code>scanf</code>çš„å‚æ•°å±•ç¤ºå‡ºæ¥ï¼Œå“ªæ€•æ˜¯æ–°æ‰‹å°ç™½ä¹Ÿå¯ä»¥æ³¨æ„åˆ°<code>â€˜%d %c %dâ€˜</code>å°±æ˜¯<strong>phase_3</strong>æ­£è§£çš„è¾“å…¥æ ¼å¼ã€‚æœ‰ç»éªŒçš„è¯å°±å¯ä»¥ç›´æ¥<code>x/s 0x4024ee</code>æŸ¥çœ‹è¾“å…¥æ ¼å¼äº†ï¼Œå› ä¸º<code>call scanf</code>çš„ä¸Šä¸€å¥æŒ‡ä»¤å³æ˜¯ç”¨æ ¼å¼å­—ç¬¦ä¸²åœ°å€èµ‹å€¼<code>rsi</code>å¯„å­˜å™¨ï¼Œå†ä½œä¸ºå‚æ•°ä¼ ç»™<code>scanf</code>å‡½æ•°ã€‚</p>
</li>
<li><p>ç¡®å®šäº†è¾“å…¥æ ¼å¼ï¼Œé‡æ–°è¿è¡Œè¾“å…¥<code>1 o 1</code>å¼€å§‹è¿›ä¸€æ­¥åˆ†æï¼š</p>
<img src="/2022/04/21/binary-bomb/3.2.png" class="" title="**phase_3**">
<p>ä»£ç åœ¨<code>scanf</code>ä¹‹ååˆ¤æ–­äº†è¾“å…¥å‚æ•°ä¸ªæ•°æ˜¯å¦å¤§äº2ä¸ªï¼Œåˆåˆ¤æ–­äº†ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦å°äºç­‰äº7ï¼Œéƒ½é€šè¿‡åˆ™è·³è½¬åˆ°<code>ç¬¬ä¸€ä¸ªå‚æ•°*8 + 0x402500</code>å¤„ï¼Œå…ˆä¸ç®¡è¿™æ˜¯å“ªï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚æ³¨æ„åˆ°è¿™å¥<code>cmp    dword ptr [rsp + 0x14], 0x30b</code>ï¼Œçœ‹ä¼¼æ˜¯åœ¨åˆ¤æ–­ä¸€ä¸ªå‚æ•°æ˜¯å¦ä¸º<code>0x30b</code>ï¼Œä½†æ˜¯å“ªä¸€ä¸ªå‚æ•°å‘¢ï¼Ÿä¹‹å‰è¾“å…¥çš„<code>1 o 1</code>ä¸æ˜¯å¾ˆåˆé€‚ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå‚æ•°å’Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸€æ ·ï¼Œåœ¨æ ˆé‡Œå°±çœ‹ä¸å‡ºå“ªä¸ªä½ç½®å¯¹åº”å“ªä¸ªå‚æ•°ï¼Œæˆ‘è¿™é‡Œåˆå°†è¾“å…¥æ”¹æˆäº†<code>1 o 2</code>ï¼Œå†çœ‹ä¸€ä¸‹æ ˆåŒºï¼š</p>
<img src="/2022/04/21/binary-bomb/3.3.png" class="" title="**phase_3**">
<p><code>dword ptr [rsp + 0x14]</code>çš„å€¼æ˜¯2ï¼Œæ‰€ä»¥<code>dword ptr [rsp + 0x14]</code>å¯¹åº”çš„æ˜¯ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚å› æ­¤ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°åº”è¯¥ä¸º<code>0x30b</code>ï¼Œä½†æ³¨æ„è¿™ä¸ªæ•°æ˜¯åå…­è¿›åˆ¶ï¼Œè€Œè¾“å…¥æ ¼å¼æ˜¯<code>%d</code>å³åè¿›åˆ¶ï¼Œæ‰€ä»¥çœŸæ­£çš„ç¬¬ä¸‰å‚æ•°æ˜¯<code>779</code>ã€‚</p>
</li>
<li><p>ç»§ç»­å‘ä¸‹ï¼Œè·³è½¬åˆ°äº†<code>phase_3+3280x40105d &lt;phase_3+328&gt;    cmp    al, byte ptr [rsp + 0xf]</code>ï¼Œ<code>byte ptr [rsp + 0xf]</code>çš„å€¼å¯ä»¥åœ¨æ ˆé‡Œçœ‹åˆ°æ˜¯<code>0x6f</code>ï¼Œä¹Ÿå³ç¬¬äºŒä¸ªå‚æ•°<code>o</code>çš„ASCIIç ï¼Œå¯ä»¥è¾“å…¥<code>x/bc $rsp+0xf</code>éªŒè¯ã€‚å°†ç¬¬äºŒä¸ªå‚æ•°å’Œ<code>al</code>å³<code>rax</code>çš„æœ€åä¸€å­—èŠ‚æ¯”è¾ƒï¼Œé‚£ç°åœ¨<code>rax</code>é‡Œå­˜çš„åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¯ä»¥æ³¨æ„åˆ°æ˜¯åœ¨æ¯”è¾ƒç¬¬ä¸‰ä¸ªå‚æ•°å‰æœ‰ä¸æ˜¾çœ¼çš„ä¸€è¡Œ<code>mov    eax, 0x66</code>ï¼Œ<code>0x66</code>å¯¹åº”çš„å­—æ¯æ˜¯<code>f</code>ã€‚è‡³æ­¤ï¼Œå¯ä»¥ç¡®å®šä¸€ç»„æ­£ç¡®çš„ç­”æ¡ˆä¸º<code>1 f 779</code>ã€‚</p>
</li>
</ol>
<ul>
<li>Tip: åœ¨Pythonå‘½ä»¤è¡Œä¸­ï¼Œè¾“å…¥åå…­è¿›åˆ¶æ•°ä¼šè¾“å‡ºå®ƒçš„åè¿›åˆ¶ï¼›ä½¿ç”¨<code>print(&#39;&#123;:c&#125;&#39;.format(0x66))</code>å¯ä»¥è¾“å‡º<code>0x66</code>å¯¹åº”çš„ASCIIå­—ç¬¦ã€‚<img src="/2022/04/21/binary-bomb/3.4.png" class="" title="Tip"></li>
</ul>
<ol start="4">
<li>ä¹‹æ‰€ä»¥è¯´å¾—åˆ°çš„åªæ˜¯å…¶ä¸­ä¸€ç»„æ­£ç¡®ç­”æ¡ˆï¼Œæ˜¯å› ä¸ºç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ä¼šå†³å®šè·³è½¬åˆ°çš„<code>ç¬¬ä¸€ä¸ªå‚æ•°*8 + 0x402500</code>ä½ç½®ï¼Œè€Œç¬¬ä¸€ä¸ªå‚æ•°å€¼åˆå°äºç­‰äº7ï¼Œä¸èƒ½ä¸ºè´Ÿï¼Œæ‰€ä»¥å¯¹åº”ä¸åŒçš„ç¬¬ä¸€å‚æ•°ï¼Œä¸€å…±ä¼šæœ‰å…«ä¸ªä¸åŒçš„ç­”æ¡ˆã€‚å¾—å‡ºç­”æ¡ˆçš„æ­¥éª¤å®Œå…¨ä¸€æ ·ï¼Œå°±ä¸å†èµ˜è¿°ã€‚</li>
</ol>
<h3 id="phase-4"><a href="#phase-4" class="headerlink" title="phase_4"></a><strong>phase_4</strong></h3><ol>
<li><p>å…ˆé™„ä¸Š<strong>phase_4</strong>å’Œå†…éƒ¨å‡½æ•°<strong>func4</strong>çš„åæ±‡ç¼–ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Dump of assembler code for function phase_4:</span><br><span class="line">   0x00000000004010b5 &lt;+0&gt;:     sub    rsp,0x18</span><br><span class="line">   0x00000000004010b9 &lt;+4&gt;:     mov    rax,QWORD PTR fs:0x28</span><br><span class="line">   0x00000000004010c2 &lt;+13&gt;:    mov    QWORD PTR [rsp+0x8],rax</span><br><span class="line">   0x00000000004010c7 &lt;+18&gt;:    xor    eax,eax</span><br><span class="line">   0x00000000004010c9 &lt;+20&gt;:    lea    rcx,[rsp+0x4]</span><br><span class="line">   0x00000000004010ce &lt;+25&gt;:    mov    rdx,rsp</span><br><span class="line">   0x00000000004010d1 &lt;+28&gt;:    mov    esi,0x40268f</span><br><span class="line">   0x00000000004010d6 &lt;+33&gt;:    call   0x400bb0 &lt;__isoc99_sscanf@plt&gt;</span><br><span class="line">   0x00000000004010db &lt;+38&gt;:    cmp    eax,0x2</span><br><span class="line">   0x00000000004010de &lt;+41&gt;:    jne    0x4010e6 &lt;phase_4+49&gt;</span><br><span class="line">   0x00000000004010e0 &lt;+43&gt;:    cmp    DWORD PTR [rsp],0xe</span><br><span class="line">   0x00000000004010e4 &lt;+47&gt;:    jbe    0x4010eb &lt;phase_4+54&gt;</span><br><span class="line">   0x00000000004010e6 &lt;+49&gt;:    call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x00000000004010eb &lt;+54&gt;:    mov    edx,0xe</span><br><span class="line">   0x00000000004010f0 &lt;+59&gt;:    mov    esi,0x0</span><br><span class="line">   0x00000000004010f5 &lt;+64&gt;:    mov    edi,DWORD PTR [rsp]</span><br><span class="line">   0x00000000004010f8 &lt;+67&gt;:    call   0x401082 &lt;func4&gt;</span><br><span class="line">   0x00000000004010fd &lt;+72&gt;:    cmp    eax,0x13</span><br><span class="line">   0x0000000000401100 &lt;+75&gt;:    jne    0x401109 &lt;phase_4+84&gt;</span><br><span class="line">   0x0000000000401102 &lt;+77&gt;:    cmp    DWORD PTR [rsp+0x4],0x13</span><br><span class="line">   0x0000000000401107 &lt;+82&gt;:    je     0x40110e &lt;phase_4+89&gt;</span><br><span class="line">   0x0000000000401109 &lt;+84&gt;:    call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x000000000040110e &lt;+89&gt;:    mov    rax,QWORD PTR [rsp+0x8]</span><br><span class="line">   0x0000000000401113 &lt;+94&gt;:    xor    rax,QWORD PTR fs:0x28</span><br><span class="line">   0x000000000040111c &lt;+103&gt;:   je     0x401123 &lt;phase_4+110&gt;</span><br><span class="line">   0x000000000040111e &lt;+105&gt;:   call   0x400b00 &lt;__stack_chk_fail@plt&gt;</span><br><span class="line">   0x0000000000401123 &lt;+110&gt;:   add    rsp,0x18</span><br><span class="line">   0x0000000000401127 &lt;+114&gt;:   ret    </span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Dump of assembler code for function func4:</span><br><span class="line">   0x0000000000401082 &lt;+0&gt;:     push   rbx</span><br><span class="line">   0x0000000000401083 &lt;+1&gt;:     mov    eax,edx</span><br><span class="line">   0x0000000000401085 &lt;+3&gt;:     sub    eax,esi</span><br><span class="line">   0x0000000000401087 &lt;+5&gt;:     mov    ebx,eax</span><br><span class="line">   0x0000000000401089 &lt;+7&gt;:     shr    ebx,0x1f</span><br><span class="line">   0x000000000040108c &lt;+10&gt;:    add    eax,ebx</span><br><span class="line">   0x000000000040108e &lt;+12&gt;:    sar    eax,1</span><br><span class="line">   0x0000000000401090 &lt;+14&gt;:    lea    ebx,[rax+rsi*1]</span><br><span class="line">   0x0000000000401093 &lt;+17&gt;:    cmp    ebx,edi</span><br><span class="line">   0x0000000000401095 &lt;+19&gt;:    jle    0x4010a3 &lt;func4+33&gt;</span><br><span class="line">   0x0000000000401097 &lt;+21&gt;:    lea    edx,[rbx-0x1]</span><br><span class="line">   0x000000000040109a &lt;+24&gt;:    call   0x401082 &lt;func4&gt;</span><br><span class="line">   0x000000000040109f &lt;+29&gt;:    add    eax,ebx</span><br><span class="line">   0x00000000004010a1 &lt;+31&gt;:    jmp    0x4010b3 &lt;func4+49&gt;</span><br><span class="line">   0x00000000004010a3 &lt;+33&gt;:    mov    eax,ebx</span><br><span class="line">   0x00000000004010a5 &lt;+35&gt;:    cmp    ebx,edi</span><br><span class="line">   0x00000000004010a7 &lt;+37&gt;:    jge    0x4010b3 &lt;func4+49&gt;</span><br><span class="line">   0x00000000004010a9 &lt;+39&gt;:    lea    esi,[rbx+0x1]</span><br><span class="line">   0x00000000004010ac &lt;+42&gt;:    call   0x401082 &lt;func4&gt;</span><br><span class="line">   0x00000000004010b1 &lt;+47&gt;:    add    eax,ebx</span><br><span class="line">   0x00000000004010b3 &lt;+49&gt;:    pop    rbx</span><br><span class="line">   0x00000000004010b4 &lt;+50&gt;:    ret    </span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆä»ç„¶æ˜¯ç¡®å®šè¾“å…¥çš„æ ¼å¼ã€‚æ‰¾åˆ°<code>scanf</code>å‡½æ•°ï¼Œä»å…¶ä¸Šä¸€è¡Œä¸­å¾—åˆ°æ ¼å¼å­—ç¬¦ä¸²åœ°å€ï¼Œæ‰§è¡Œ<code>x/s 0x40268f</code>ï¼Œå¾—åˆ°æ ¼å¼å­—ç¬¦ä¸²ä¸º<code>&quot;%d %d&quot;</code>ã€‚</p>
</li>
<li><p><strong>phase_4</strong>çš„ä¸»å‡½æ•°éƒ¨åˆ†çš„é€»è¾‘å¾ˆç®€å•ï¼Œæœ‰äº†å‰ä¸‰ä¸ªphaseçš„çƒ­èº«ï¼Œåº”è¯¥å¯ä»¥è½»æ¾ä»åæ±‡ç¼–ä¸­çœ‹å‡ºå…¶é€»è¾‘ï¼šå…ˆåˆ¤æ–­è¾“å…¥å‚æ•°ä¸ªæ•°æ˜¯å¦ä¸º2ï¼Œå†åˆ¤æ–­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦å°äº14ï¼Œé€šè¿‡åˆ™è°ƒç”¨å‡½æ•°<code>func4</code>ï¼Œå¹¶åˆ¤æ–­è¿”å›å€¼æ˜¯å¦ä¸º19ï¼Œæœ€ååˆ¤æ–­åˆå§‹è¾“å…¥çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦ä¸º19ï¼Œå‡ä¸ºæ˜¯åˆ™é¡ºåˆ©è¿‡å…³ã€‚</p>
</li>
<li><p>å…‰ä»ç¬¬äºŒæ­¥å°±èƒ½å¾—çŸ¥ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å°äºç­‰äº14çš„è‡ªç„¶æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯19ï¼Œé€šè¿‡æš´åŠ›æšä¸¾15ä¸ªå¯èƒ½çš„è¾“å…¥å°±èƒ½å¾—åˆ°ç­”æ¡ˆï¼Œç”šè‡³ä¸ç”¨åˆ†æ<code>func4</code>å‡½æ•°ã€‚ä½†æ˜¯å‰ææ˜¯<code>func4</code>å‡½æ•°é‡Œæ²¡æœ‰æ”¹åŠ¨æœ€åˆè¾“å…¥çš„å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰è°ƒç”¨<code>explode_bomb</code>å‡½æ•°ã€‚å‰è€…åœ¨è¿™ç§çº§åˆ«çš„é¢˜åº”è¯¥ä¸ä¼šæœ‰ï¼Œåè€…é€šè¿‡åæ±‡ç¼–å‘ç°ä¹Ÿæ»¡è¶³ã€‚èµ¶æ—¶é—´çš„è¯å°±å¯ä»¥å¼€å§‹è¯•ç­”æ¡ˆäº†ï¼Œè¿™é‡Œä¸å†åˆ†æ<code>func4</code>å‡½æ•°ï¼Œé™„ä¸Šä¼ªä»£ç ï¼ˆä»…ä¾›å‚è€ƒï¼Œæºè‡ªIDAï¼Œå…¶ä¸­å‚æ•°a1&#x3D;è¾“å…¥çš„ç¬¬ä¸€å‚æ•°, a2&#x3D;0, a3&#x3D;14ï¼‰ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">__int64 <span class="title">func4</span><span class="params">(__int64 a1, __int64 a2, <span class="type">int</span> a3)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">int</span> v3; <span class="comment">// ebx</span></span><br><span class="line">  __int64 result; <span class="comment">// rax</span></span><br><span class="line"></span><br><span class="line">  v3 = (a3 - (<span class="type">int</span>)a2) / <span class="number">2</span> + a2;</span><br><span class="line">  <span class="keyword">if</span> ( v3 &gt; (<span class="type">int</span>)a1 )</span><br><span class="line">    <span class="keyword">return</span> v3 + (<span class="type">unsigned</span> <span class="type">int</span>)<span class="built_in">func4</span>(a1, a2);</span><br><span class="line">  result = (<span class="type">unsigned</span> <span class="type">int</span>)v3;</span><br><span class="line">  <span class="keyword">if</span> ( v3 &lt; (<span class="type">int</span>)a1 )</span><br><span class="line">    result = v3 + (<span class="type">unsigned</span> <span class="type">int</span>)<span class="built_in">func4</span>(a1, (<span class="type">unsigned</span> <span class="type">int</span>)(v3 + <span class="number">1</span>));</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="phase-5"><a href="#phase-5" class="headerlink" title="phase_5"></a><strong>phase_5</strong></h3><ol>
<li><p>å…ˆé™„ä¸Š<strong>phase_5</strong>çš„åæ±‡ç¼–ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Dump of assembler code for function phase_5:</span><br><span class="line">=&gt; 0x0000000000401128 &lt;+0&gt;:     sub    rsp,0x18</span><br><span class="line">   0x000000000040112c &lt;+4&gt;:     mov    rax,QWORD PTR fs:0x28</span><br><span class="line">   0x0000000000401135 &lt;+13&gt;:    mov    QWORD PTR [rsp+0x8],rax</span><br><span class="line">   0x000000000040113a &lt;+18&gt;:    xor    eax,eax</span><br><span class="line">   0x000000000040113c &lt;+20&gt;:    lea    rcx,[rsp+0x4]</span><br><span class="line">   0x0000000000401141 &lt;+25&gt;:    mov    rdx,rsp</span><br><span class="line">   0x0000000000401144 &lt;+28&gt;:    mov    esi,0x40268f</span><br><span class="line">   0x0000000000401149 &lt;+33&gt;:    call   0x400bb0 &lt;__isoc99_sscanf@plt&gt;</span><br><span class="line">   0x000000000040114e &lt;+38&gt;:    cmp    eax,0x1</span><br><span class="line">   0x0000000000401151 &lt;+41&gt;:    jg     0x401158 &lt;phase_5+48&gt;</span><br><span class="line">   0x0000000000401153 &lt;+43&gt;:    call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000401158 &lt;+48&gt;:    mov    eax,DWORD PTR [rsp]</span><br><span class="line">   0x000000000040115b &lt;+51&gt;:    and    eax,0xf</span><br><span class="line">   0x000000000040115e &lt;+54&gt;:    mov    DWORD PTR [rsp],eax</span><br><span class="line">   0x0000000000401161 &lt;+57&gt;:    cmp    eax,0xf</span><br><span class="line">   0x0000000000401164 &lt;+60&gt;:    je     0x401195 &lt;phase_5+109&gt;</span><br><span class="line">   0x0000000000401166 &lt;+62&gt;:    mov    ecx,0x0</span><br><span class="line">   0x000000000040116b &lt;+67&gt;:    mov    edx,0x0</span><br><span class="line">   0x0000000000401170 &lt;+72&gt;:    add    edx,0x1</span><br><span class="line">   0x0000000000401173 &lt;+75&gt;:    cdqe   </span><br><span class="line">   0x0000000000401175 &lt;+77&gt;:    mov    eax,DWORD PTR [rax*4+0x402540]</span><br><span class="line">   0x000000000040117c &lt;+84&gt;:    add    ecx,eax</span><br><span class="line">   0x000000000040117e &lt;+86&gt;:    cmp    eax,0xf</span><br><span class="line">   0x0000000000401181 &lt;+89&gt;:    jne    0x401170 &lt;phase_5+72&gt;</span><br><span class="line">   0x0000000000401183 &lt;+91&gt;:    mov    DWORD PTR [rsp],0xf</span><br><span class="line">   0x000000000040118a &lt;+98&gt;:    cmp    edx,0xf</span><br><span class="line">   0x000000000040118d &lt;+101&gt;:   jne    0x401195 &lt;phase_5+109&gt;</span><br><span class="line">   0x000000000040118f &lt;+103&gt;:   cmp    ecx,DWORD PTR [rsp+0x4]</span><br><span class="line">   0x0000000000401193 &lt;+107&gt;:   je     0x40119a &lt;phase_5+114&gt;</span><br><span class="line">   0x0000000000401195 &lt;+109&gt;:   call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x000000000040119a &lt;+114&gt;:   mov    rax,QWORD PTR [rsp+0x8]</span><br><span class="line">   0x000000000040119f &lt;+119&gt;:   xor    rax,QWORD PTR fs:0x28</span><br><span class="line">   0x00000000004011a8 &lt;+128&gt;:   je     0x4011af &lt;phase_5+135&gt;</span><br><span class="line">   0x00000000004011aa &lt;+130&gt;:   call   0x400b00 &lt;__stack_chk_fail@plt&gt;</span><br><span class="line">   0x00000000004011af &lt;+135&gt;:   add    rsp,0x18</span><br><span class="line">   0x00000000004011b3 &lt;+139&gt;:   ret    </span><br><span class="line">End of assembler dump.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>åŒæ ·ï¼Œé€šè¿‡è§‚å¯Ÿåæ±‡ç¼–å¾—åˆ°æ ¼å¼å­—ç¬¦ä¸²åœ°å€ä¸º<code>0x40268f</code>ï¼Œæ‰§è¡Œ<code>x/s 0x40268f</code>å¾—åˆ°æ ¼å¼å­—ç¬¦ä¸²ä¸º<code>&quot;%d %d&quot;</code>ï¼Œè¿™é‡Œè¾“å…¥<code>5 10</code>åç»§ç»­åˆ†æã€‚</p>
</li>
<li><p>ä»<code>scanf</code>å‡½æ•°ä¸‹ä¸€è¡Œå¼€å§‹ä¸€æ­¥æ­¥æ‰§è¡Œï¼šåˆ¤æ–­è¾“å…¥å‚æ•°ä¸ªæ•°æ˜¯å¦å¤§äº1ï¼Œæ˜¯åˆ™ç»§ç»­ï¼›å–ç¬¬ä¸€å‚æ•°çš„åå››ä½ï¼Œå¹¶è¦†ç›–åŸæ¥çš„å‚æ•°ï¼Œä¸”ç¬¬ä¸€å‚æ•°çš„åå››ä½ä¸å…¨ä¸º1ï¼›è¿™æ—¶ç¬¬ä¸€å‚æ•°çš„å€¼è½¬åŒ–æˆä¸º0ï½14ä¹‹é—´ä¸€ä¸ªæ•°ï¼›ä»<code>0x0000000000401170 &lt;+72&gt;:    add    edx,0x1</code>å¼€å§‹è¿›å…¥å¾ªç¯ï¼š</p>
<img src="/2022/04/21/binary-bomb/5.1.png" class="" title="**phase_5**"></li>
</ol>
<ul>
<li>å…¶ä¸­<code>cdqe</code>æ˜¯ä½¿ç”¨<code>eax</code>çš„æœ€é«˜ä½æ‹“å±•<code>rax</code>é«˜32ä½çš„æ‰€æœ‰ä½ã€‚</li>
</ul>
<ol start="2">
<li><p>æ³¨æ„åˆ°è¿™ä¸€è¡Œ<code>mov    eax, dword ptr [rax*4 + 0x402540]</code>ï¼Œä¸ç¦å¥½å¥‡åœ°å€<code>0x402540</code>é‡Œå­˜äº†ä»€ä¹ˆï¼Œæ‰§è¡Œ<code>x/20wx 0x402540</code>æŸ¥çœ‹å†…å­˜ï¼š</p>
<img src="/2022/04/21/binary-bomb/5.2.png" class="" title="**phase_5**">
<p>æœç„¶æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ é•¿åº¦ä¸º4å­—èŠ‚ï¼Œæ‰€ä»¥<code>dword ptr [rax*4 + 0x402540]</code>å€¼ä¸ºè¯¥æ•°ç»„çš„ç¬¬<code>rax</code>ä¸ªå…ƒç´ ã€‚å†æ¥çœ‹è¿™æ®µå¾ªç¯ï¼Œå®ƒä¸æ–­çš„å°†æ•°ç»„çš„ç¬¬<code>rax</code>ä¸ªå…ƒç´ å†æ¬¡èµ‹äºˆ<code>rax</code>ï¼ŒåŒæ—¶å°†<code>rax</code>çš„å€¼ç´¯åŠ åˆ°<code>ecx</code>å¯„å­˜å™¨ã€‚<code>edx</code>è®°å½•å¾ªç¯çš„æ¬¡æ•°ï¼Œç›´åˆ°<code>rax</code>å€¼ä¸º<code>0xf</code>æ—¶é€€å‡ºå¾ªç¯ï¼š</p>
<img src="/2022/04/21/binary-bomb/5.3.png" class="" title="**phase_5**">
</li>
<li><p>é€€å‡ºå¾ªç¯åï¼Œåˆ¤æ–­<code>edx</code>çš„å€¼æ˜¯å¦ä¸º<code>0xf</code>ï¼Œç„¶ååˆ¤æ–­<code>ecx</code>å’Œç¬¬äºŒå‚æ•°æ˜¯å¦ç›¸ç­‰ï¼Œå‡ä¸ºæ˜¯åˆ™è¿‡å…³ã€‚<code>edx</code>å€¼ä¸º<code>0xf</code>å³å¾ªç¯æ¬¡æ•°ä¸º15æ¬¡ï¼Œæ•°ç»„é•¿åº¦ä¸º16ï¼Œæ‰€ä»¥å¾ˆæœ‰å¯èƒ½<code>ecx</code>æœ€åå°±æ˜¯æ•°ç»„æ‰€æœ‰å…ƒç´ çš„å’Œï¼ˆé™¤ä¸‹æ ‡ä¸º<code>0xf</code>çš„å…ƒç´ ï¼‰ã€‚å†è§‚å¯Ÿæ•°ç»„ï¼Œå‘ç°é€šè¿‡ä¸æ–­çš„å°†æ•°ç»„ä¸‹æ ‡å¯¹åº”å…ƒç´ ä½œä¸ºæ–°çš„æ•°ç»„ä¸‹æ ‡ï¼Œå¯ä»¥éå†å®Œæ•´ä¸ªæ•°ç»„ï¼Œå› æ­¤åœ¨15æ¬¡å¾ªç¯ä¸­å¿…ç„¶å®Œæˆäº†æ•°ç»„çš„ä¸€æ¬¡éå†ï¼Œ<code>ecx</code>å€¼å³æ‰€æœ‰å…ƒç´ å’Œï¼ˆé™¤ä¸‹æ ‡ä¸º<code>0xf</code>çš„å…ƒç´ ï¼‰ä¸º<code>115</code>ã€‚å› æ­¤ç¬¬äºŒä¸ªå‚æ•°åº”è¯¥ä¸º<code>115</code>ã€‚</p>
</li>
<li><p>é‚£ä¹ˆç¬¬ä¸€ä¸ªå‚æ•°å‘¢ï¼Ÿç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>eax</code>çš„åˆå€¼ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªä¸‹æ ‡ï¼Œç„¶åéœ€è¦è®©<code>eax</code>éå†æ•°ç»„çš„æ—¶å€™æ­£å¥½åœ¨æœ€åæ‰è¢«èµ‹å€¼<code>0xf</code>ï¼Œå¹¶é€€å‡ºå¾ªç¯ã€‚å¯ä»¥æš´åŠ›æšä¸¾ï¼Œä¹Ÿå¯ä»¥ç”¨é€†æ¨çš„æ–¹æ³•ï¼šæœ€å<code>eax</code>å€¼ä¸º<code>0xf</code>ï¼Œé‚£ä¹ˆ<code>eax</code>å‰ä¸€ä¸ªå€¼ä¸ºå…ƒç´ <code>0xf</code>çš„ä¸‹æ ‡<code>0x6</code>ï¼Œå†å‰ä¸€ä¸ªå€¼ä¸ºå…ƒç´ <code>0x6</code>çš„ä¸‹æ ‡<code>0xe</code>ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå¾—åˆ°æœ€åˆä¸‹æ ‡åº”è¯¥ä¸º<code>0x5</code>ã€‚æˆ–è€…ç›´æ¥æ­£æ¨ï¼Œä¸‹æ ‡ä¸º<code>0xf</code>çš„å…ƒç´ <code>0x5</code>å³ä¸ºæ‰€æ±‚å€¼ã€‚æ•…ç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥ä¸º<code>0x5</code>ã€‚</p>
</li>
</ol>
<h3 id="phase-6"><a href="#phase-6" class="headerlink" title="phase_6"></a>phase_6</h3><ol>
<li><p>å…ˆé™„ä¸Š<strong>phase_6</strong>çš„åæ±‡ç¼–ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Dump of assembler code for function phase_6:</span><br><span class="line">   0x00000000004011b4 &lt;+0&gt;:     push   r14</span><br><span class="line">   0x00000000004011b6 &lt;+2&gt;:     push   r13</span><br><span class="line">   0x00000000004011b8 &lt;+4&gt;:     push   r12</span><br><span class="line">   0x00000000004011ba &lt;+6&gt;:     push   rbp</span><br><span class="line">   0x00000000004011bb &lt;+7&gt;:     push   rbx</span><br><span class="line">   0x00000000004011bc &lt;+8&gt;:     sub    rsp,0x60</span><br><span class="line">   0x00000000004011c0 &lt;+12&gt;:    mov    rax,QWORD PTR fs:0x28</span><br><span class="line">   0x00000000004011c9 &lt;+21&gt;:    mov    QWORD PTR [rsp+0x58],rax</span><br><span class="line">   0x00000000004011ce &lt;+26&gt;:    xor    eax,eax</span><br><span class="line">   0x00000000004011d0 &lt;+28&gt;:    mov    rsi,rsp</span><br><span class="line">   0x00000000004011d3 &lt;+31&gt;:    call   0x40152b &lt;read_six_numbers&gt;</span><br><span class="line">   0x00000000004011d8 &lt;+36&gt;:    mov    r12,rsp</span><br><span class="line">   0x00000000004011db &lt;+39&gt;:    mov    r13,rsp</span><br><span class="line">   0x00000000004011de &lt;+42&gt;:    mov    r14d,0x0</span><br><span class="line">   0x00000000004011e4 &lt;+48&gt;:    mov    rbp,r13</span><br><span class="line">   0x00000000004011e7 &lt;+51&gt;:    mov    eax,DWORD PTR [r13+0x0]</span><br><span class="line">   0x00000000004011eb &lt;+55&gt;:    sub    eax,0x1</span><br><span class="line">   0x00000000004011ee &lt;+58&gt;:    cmp    eax,0x5</span><br><span class="line">   0x00000000004011f1 &lt;+61&gt;:    jbe    0x4011f8 &lt;phase_6+68&gt;</span><br><span class="line">   0x00000000004011f3 &lt;+63&gt;:    call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x00000000004011f8 &lt;+68&gt;:    add    r14d,0x1</span><br><span class="line">   0x00000000004011fc &lt;+72&gt;:    cmp    r14d,0x6</span><br><span class="line">   0x0000000000401200 &lt;+76&gt;:    je     0x401223 &lt;phase_6+111&gt;</span><br><span class="line">   0x0000000000401202 &lt;+78&gt;:    mov    ebx,r14d</span><br><span class="line">   0x0000000000401205 &lt;+81&gt;:    movsxd rax,ebx</span><br><span class="line">   0x0000000000401208 &lt;+84&gt;:    mov    eax,DWORD PTR [rsp+rax*4]</span><br><span class="line">   0x000000000040120b &lt;+87&gt;:    cmp    DWORD PTR [rbp+0x0],eax</span><br><span class="line">   0x000000000040120e &lt;+90&gt;:    jne    0x401215 &lt;phase_6+97&gt;</span><br><span class="line">   0x0000000000401210 &lt;+92&gt;:    call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x0000000000401215 &lt;+97&gt;:    add    ebx,0x1</span><br><span class="line">   0x0000000000401218 &lt;+100&gt;:   cmp    ebx,0x5</span><br><span class="line">   0x000000000040121b &lt;+103&gt;:   jle    0x401205 &lt;phase_6+81&gt;</span><br><span class="line">   0x000000000040121d &lt;+105&gt;:   add    r13,0x4</span><br><span class="line">   0x0000000000401221 &lt;+109&gt;:   jmp    0x4011e4 &lt;phase_6+48&gt;</span><br><span class="line">   0x0000000000401223 &lt;+111&gt;:   lea    rcx,[rsp+0x18]</span><br><span class="line">   0x0000000000401228 &lt;+116&gt;:   mov    edx,0x7</span><br><span class="line">   0x000000000040122d &lt;+121&gt;:   mov    eax,edx</span><br><span class="line">   0x000000000040122f &lt;+123&gt;:   sub    eax,DWORD PTR [r12]</span><br><span class="line">   0x0000000000401233 &lt;+127&gt;:   mov    DWORD PTR [r12],eax</span><br><span class="line">   0x0000000000401237 &lt;+131&gt;:   add    r12,0x4</span><br><span class="line">   0x000000000040123b &lt;+135&gt;:   cmp    rcx,r12</span><br><span class="line">   0x000000000040123e &lt;+138&gt;:   jne    0x40122d &lt;phase_6+121&gt;</span><br><span class="line">   0x0000000000401240 &lt;+140&gt;:   mov    esi,0x0</span><br><span class="line">   0x0000000000401245 &lt;+145&gt;:   jmp    0x401261 &lt;phase_6+173&gt;</span><br><span class="line">   0x0000000000401247 &lt;+147&gt;:   mov    rdx,QWORD PTR [rdx+0x8]</span><br><span class="line">   0x000000000040124b &lt;+151&gt;:   add    eax,0x1</span><br><span class="line">   0x000000000040124e &lt;+154&gt;:   cmp    eax,ecx</span><br><span class="line">   0x0000000000401250 &lt;+156&gt;:   jne    0x401247 &lt;phase_6+147&gt;</span><br><span class="line">   0x0000000000401252 &lt;+158&gt;:   mov    QWORD PTR [rsp+rsi*2+0x20],rdx</span><br><span class="line">   0x0000000000401257 &lt;+163&gt;:   add    rsi,0x4</span><br><span class="line">   0x000000000040125b &lt;+167&gt;:   cmp    rsi,0x18</span><br><span class="line">   0x000000000040125f &lt;+171&gt;:   je     0x401275 &lt;phase_6+193&gt;</span><br><span class="line">   0x0000000000401261 &lt;+173&gt;:   mov    ecx,DWORD PTR [rsp+rsi*1]</span><br><span class="line">   0x0000000000401264 &lt;+176&gt;:   mov    eax,0x1</span><br><span class="line">   0x0000000000401269 &lt;+181&gt;:   mov    edx,0x6042f0</span><br><span class="line">   0x000000000040126e &lt;+186&gt;:   cmp    ecx,0x1</span><br><span class="line">   0x0000000000401271 &lt;+189&gt;:   jg     0x401247 &lt;phase_6+147&gt;</span><br><span class="line">   0x0000000000401273 &lt;+191&gt;:   jmp    0x401252 &lt;phase_6+158&gt;</span><br><span class="line">   0x0000000000401275 &lt;+193&gt;:   mov    rbx,QWORD PTR [rsp+0x20]</span><br><span class="line">   0x000000000040127a &lt;+198&gt;:   lea    rax,[rsp+0x20]</span><br><span class="line">   0x000000000040127f &lt;+203&gt;:   lea    rsi,[rsp+0x48]</span><br><span class="line">   0x0000000000401284 &lt;+208&gt;:   mov    rcx,rbx</span><br><span class="line">   0x0000000000401287 &lt;+211&gt;:   mov    rdx,QWORD PTR [rax+0x8]</span><br><span class="line">   0x000000000040128b &lt;+215&gt;:   mov    QWORD PTR [rcx+0x8],rdx</span><br><span class="line">   0x000000000040128f &lt;+219&gt;:   add    rax,0x8</span><br><span class="line">   0x0000000000401293 &lt;+223&gt;:   mov    rcx,rdx</span><br><span class="line">   0x0000000000401296 &lt;+226&gt;:   cmp    rsi,rax</span><br><span class="line">   0x0000000000401299 &lt;+229&gt;:   jne    0x401287 &lt;phase_6+211&gt;</span><br><span class="line">   0x000000000040129b &lt;+231&gt;:   mov    QWORD PTR [rdx+0x8],0x0</span><br><span class="line">   0x00000000004012a3 &lt;+239&gt;:   mov    ebp,0x5</span><br><span class="line">   0x00000000004012a8 &lt;+244&gt;:   mov    rax,QWORD PTR [rbx+0x8]</span><br><span class="line">   0x00000000004012ac &lt;+248&gt;:   mov    eax,DWORD PTR [rax]</span><br><span class="line">   0x00000000004012ae &lt;+250&gt;:   cmp    DWORD PTR [rbx],eax</span><br><span class="line">   0x00000000004012b0 &lt;+252&gt;:   jge    0x4012b7 &lt;phase_6+259&gt;</span><br><span class="line">   0x00000000004012b2 &lt;+254&gt;:   call   0x401509 &lt;explode_bomb&gt;</span><br><span class="line">   0x00000000004012b7 &lt;+259&gt;:   mov    rbx,QWORD PTR [rbx+0x8]</span><br><span class="line">   0x00000000004012bb &lt;+263&gt;:   sub    ebp,0x1</span><br><span class="line">   0x00000000004012be &lt;+266&gt;:   jne    0x4012a8 &lt;phase_6+244&gt;</span><br><span class="line">   0x00000000004012c0 &lt;+268&gt;:   mov    rax,QWORD PTR [rsp+0x58]</span><br><span class="line">   0x00000000004012c5 &lt;+273&gt;:   xor    rax,QWORD PTR fs:0x28</span><br><span class="line">   0x00000000004012ce &lt;+282&gt;:   je     0x4012d5 &lt;phase_6+289&gt;</span><br><span class="line">   0x00000000004012d0 &lt;+284&gt;:   call   0x400b00 &lt;__stack_chk_fail@plt&gt;</span><br><span class="line">   0x00000000004012d5 &lt;+289&gt;:   add    rsp,0x60</span><br><span class="line">   0x00000000004012d9 &lt;+293&gt;:   pop    rbx</span><br><span class="line">   0x00000000004012da &lt;+294&gt;:   pop    rbp</span><br><span class="line">   0x00000000004012db &lt;+295&gt;:   pop    r12</span><br><span class="line">   0x00000000004012dd &lt;+297&gt;:   pop    r13</span><br><span class="line">   0x00000000004012df &lt;+299&gt;:   pop    r14</span><br><span class="line">   0x00000000004012e1 &lt;+301&gt;:   ret    </span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure>
<p>ä½œä¸ºæœ€åä¸€ä¸ªphaseï¼Œä¸Šæ¥å°±ç»™äº†ä¸ªä¸‹é©¬å¨ï¼Œè¿™åæ±‡ç¼–åœ¨6ä¸ªphaseä¸­æœ€é•¿ï¼Œé€»è¾‘ä¹Ÿæ˜¯æœ€å¤æ‚çš„ã€‚çœ‹ä¸€ä¸‹åæ±‡ç¼–ï¼Œæ³¨æ„åˆ°<strong>phase_6</strong>è°ƒç”¨äº†<code>read_six_numbers</code>å‡½æ•°ï¼Œæ‰€ä»¥è¾“å…¥æ ¼å¼æ˜¯å’Œ<strong>phase_2</strong>ç›¸åŒçš„å…­ä¸ªæ•°å­—ã€‚è¿™é‡Œè¾“å…¥<code>1 2 3 4 5 6</code>ç»§ç»­åˆ†æã€‚</p>
</li>
<li><p>ç›´æ¥çœ‹ä¸å®¹æ˜“çœ‹å‡ºç¨‹åºçš„è§„å¾‹ï¼Œé‚£å°±ä»<code>read_six_numbers</code>å‡½æ•°ä¸‹ä¸€è¡Œå¼€å§‹ä¸€æ­¥æ­¥è¿è¡Œï¼š</p>
<img src="/2022/04/21/binary-bomb/6.1.png" class="" title="**phase_6**">
<p>ä¸Šé¢è¿™ç¬¬ä¸€æ®µä»£ç ä¸»è¦åˆ¤æ–­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦å°äº6ï¼Œå†å¾€ä¸‹æ‰§è¡Œï¼š</p>
<img src="/2022/04/21/binary-bomb/6.2.png" class="" title="**phase_6**">
<p>ä»è¿™æ®µå¯åŸºæœ¬åˆ¤æ–­ç°åœ¨ä½äºä¸€ä¸ªå¾ªç¯ä¸­ï¼Œ<code>r14d</code>ä¸­å­˜å¾ªç¯å˜é‡ï¼Œä¸”è¿™ä¸ªå¾ªç¯è¦æ‰§è¡Œ6æ¬¡ï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œï¼š</p>
<img src="/2022/04/21/binary-bomb/6.3.png" class="" title="**phase_6**">
<p>è¿™æ®µå°†å½“å‰ç¬¬<code>ebx</code>ä¸ªå‚æ•°å³ç¬¬äºŒä¸ªå‚æ•°èµ‹äºˆ<code>eax</code>ï¼Œå¹¶åˆ¤æ–­å’Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦ä¸ç›¸ç­‰ï¼Œæ˜¯åˆ™ç»§ç»­ï¼Œæ¥ä¸‹æ¥ä¼¼ä¹æ˜¯è¿™ä¸ªå¾ªç¯çš„æœ€åä¸€æ®µï¼š</p>
<img src="/2022/04/21/binary-bomb/6.4.png" class="" title="**phase_6**">
<p>å‡ºç°äº†å¦ä¸€ä¸ªå¾ªç¯å˜é‡<code>ebx</code>ï¼Œä¸”å…¶æ§åˆ¶çš„å¾ªç¯è¦æ‰§è¡Œ5æ¬¡ã€‚</p>
</li>
<li><p>å†å¾€ä¸‹ï¼Œç¨‹åºè·³è½¬åˆ°äº†<code>0x401205 &lt;phase_6+81&gt;     movsxd rax, ebx</code>ï¼Œä»ä¹‹å‰çš„åˆ†æçœ‹ï¼Œè¿™ä¸€æ®µæ˜¯åˆ¤æ–­ç¬¬<code>ebx</code>ä¸ªå‚æ•°æ˜¯å¦å’Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ç›¸ç­‰ï¼Œæ‰€ä»¥<code>ebx</code>æ§åˆ¶çš„å¾ªç¯åŠŸèƒ½æ˜¯åˆ¤æ–­6ä¸ªå‚æ•°ä¸­å…¶å®ƒ5ä¸ªå‚æ•°æ˜¯å¦å’Œç¬¬ä¸€ä¸ªå‚æ•°ç›¸ç­‰ã€‚</p>
</li>
<li><p>ç»§ç»­è¿è¡Œåˆ°<code>ebx</code>æ§åˆ¶çš„å¾ªç¯ç»“æŸï¼š</p>
<img src="/2022/04/21/binary-bomb/6.5.png" class="" title="**phase_6**">
<p>è¿™é‡Œå¯¹<code>r13</code>åŠ 4åç›´æ¥ä¸€ä¸ªå¤§è·³è½¬ï¼Œç»§ç»­è·Ÿè¿›ï¼Œå‘ç°ç»§ç»­æ‰§è¡Œçš„æ˜¯ç¬¬äºŒæ­¥åˆ†æçš„åˆ¤æ–­å‚æ•°æ˜¯å¦å°äº6ï¼Œåªä¸è¿‡è¿™æ¬¡åˆ¤æ–­çš„æ˜¯ç¬¬äºŒä¸ªå‚æ•°ã€‚åˆ†æåˆ°è¿™ï¼ŒåŸºæœ¬å¯ä»¥ç¡®å®šï¼Œä»¥ä¸Šè¿™ä¸€æ•´æ®µæ˜¯ä¸ªåŒé‡å¾ªç¯ï¼Œç”¨äºåˆ¤æ–­è¾“å…¥çš„å…­ä¸ªæ•°æ˜¯ä¸æ˜¯ä¸º1ï½6ï¼Œä¸”äº’ä¸ç›¸ç­‰ã€‚</p>
</li>
<li><p>æ£€éªŒå®Œè¾“å…¥åå°±å¿«è¿›å…¥å…³é”®é€»è¾‘äº†ï¼Œå¾ªç¯ç»“æŸç»§ç»­å‘ä¸‹æ‰§è¡Œï¼š</p>
<img src="/2022/04/21/binary-bomb/6.6.png" class="" title="**phase_6**">
<p>è¿™åˆæ˜¯ä¸€ä¸ªå°å¾ªç¯ï¼Œä½†æ¯”èµ·ä¹‹å‰é‚£ä¸ªè¦ç®€å•å¾—å¤šã€‚å…¶åŠŸèƒ½æ˜¯å¯¹æ¯ä¸ªå‚æ•°xè¿›è¡Œå¤„ç†ï¼Œä½¿æ¯ä¸ªå‚æ•°xéƒ½å˜ä¸º7-xï¼Œæ¯”å¦‚ç¬¬ä¸€ä¸ªå‚æ•°ä¸º1ï¼Œå¤„ç†åå˜æˆ6ã€‚</p>
</li>
<li><p>ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œç¨‹åºè·³è½¬åˆ°äº†<code>0x401261 &lt;phase_6+173&gt;    mov    ecx, dword ptr [rsp + rsi]</code>ï¼š</p>
<img src="/2022/04/21/binary-bomb/6.7.png" class="" title="**phase_6**">
<p>è¿™é‡Œå¼€å§‹åˆæ˜¯ä¸€ä¸ªå¾ªç¯ï¼Œæ³¨æ„åˆ°å‡ºç°äº†<code>node1 &lt;0x6042f0&gt;</code>ï¼Œä¸é˜²çœ‹ä¸€çœ¼é‡Œé¢éƒ½æœ‰ä»€ä¹ˆï¼Œæ‰§è¡Œ<code>x/25wx 0x6042f0</code>ï¼š</p>
<img src="/2022/04/21/binary-bomb/6.8.png" class="" title="**phase_6**">
<p>å¾ˆæ˜æ˜¾è¿™æ˜¯ä¸€ä¸ªå•é“¾è¡¨ï¼Œ<code>node1</code>æŒ‡å‘<code>node2</code>ï¼Œ<code>node2</code>æŒ‡å‘<code>node3</code>ï¼Œä¾æ¬¡ç±»æ¨ã€‚ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼š</p>
<img src="/2022/04/21/binary-bomb/6.9.png" class="" title="**phase_6**">
<p>ä»¤å½“å‰ç¬¬xä¸ªå‚æ•°ä¸ºa(x)ï¼Œxä¸º1ï½6ã€‚ç»“åˆä¸Šä¸€ä¸ªç‰‡æ®µçœ‹ï¼Œå¯ä»¥åˆ¤æ–­è¿™ä¸€æ®µæ˜¯éå†åˆ°ç¬¬a(1)ä¸ªèŠ‚ç‚¹ï¼Œå°†å…¶åœ°å€å­˜å…¥<code>rsp + rsi*2 + 0x20</code>ä½ç½®ï¼Œæœ€åæ›´æ”¹å¾ªç¯å˜é‡<code>rsi</code>ï¼Œåˆ¤æ–­æ˜¯å¦è¦é€€å‡ºå¾ªç¯ã€‚</p>
</li>
<li><p>ä¸Šä¸€æ­¥åœ¨<code>rsi</code>æ§åˆ¶ä¸‹ä¸€å…±æ‰§è¡Œäº†å…­æ¬¡ï¼ŒåŠŸèƒ½æ˜¯å°†ç¬¬a(x)ä¸ªèŠ‚ç‚¹æ”¾å…¥<code>rsp + x*4*2 + 0x20</code>ä½ç½®ï¼Œç»“æœå¦‚ä¸‹å›¾ï¼š</p>
<img src="/2022/04/21/binary-bomb/6.10.png" class="" title="**phase_6**">
<p>ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œåˆæ˜¯ä¸€ä¸ªå°å¾ªç¯ï¼š</p>
<img src="/2022/04/21/binary-bomb/6.11.png" class="" title="**phase_6**">
<p>ä»¤èŠ‚ç‚¹nçš„ä¸‹ä¸€èŠ‚ç‚¹æŒ‡é’ˆä¸ºflink(n)ã€‚è¿™ä¸ªå°å¾ªç¯çš„åŠŸèƒ½ä¸ºå°†èŠ‚ç‚¹a(x)çš„flink(a(x))ç½®ä¸ºèŠ‚ç‚¹a(x+1)çš„åœ°å€ã€‚æ¯”å¦‚å½“å‰å‚æ•°ä¸º<code>6 5 4 3 2 1</code>ï¼Œåˆ™å¾ªç¯å¤„ç†åå…­ä¸ªèŠ‚ç‚¹å°±ä¼šå˜æˆ<code>node6-&gt;node5-&gt;node4-&gt;node3-&gt;node2-&gt;node1</code>ã€‚</p>
</li>
<li><p>é€€å‡ºå¾ªç¯åç»§ç»­å‘ä¸‹æ‰§è¡Œï¼š</p>
<img src="/2022/04/21/binary-bomb/6.12.png" class="" title="**phase_6**">
<p>è¿™æ®µå…ˆå°†æœ€æœ«èŠ‚ç‚¹çš„flinkç½®0ï¼Œç„¶åæ¯”è¾ƒé“¾è¡¨ä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼å’Œç¬¬äºŒä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œå¦‚æœå‰è€…å¤§äºåè€…åˆ™è·³è½¬ï¼š</p>
<img src="/2022/04/21/binary-bomb/6.13.png" class="" title="**phase_6**">
<p>è¿™é‡Œè®©<code>rbx</code>æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç„¶åå¾ªç¯å˜é‡<code>ebp</code>å‡1ï¼Œç»§ç»­ä¸Šä¸€æ­¥ï¼Œå³æ¯”è¾ƒ<code>rbx</code>æŒ‡å‘çš„å½“å‰èŠ‚ç‚¹å’Œä¸‹ä¸€èŠ‚ç‚¹çš„å€¼ï¼Œå‰è€…å¤§äºåè€…åˆ™è·³è½¬ï¼Œå¦åˆ™BOOMï¼</p>
</li>
<li><p>ä¸Šä¸€æ­¥å¾ªç¯é¡ºåˆ©é€€å‡ºå³å¯è¿‡å…³ã€‚å‰ææ˜¯å½“å‰é“¾è¡¨ä¸­å‰ä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„æ•°æ®å§‹ç»ˆå¤§äºåä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ®ï¼Œæ ¹æ®ç¬¬å…­æ­¥ä¸­çš„èŠ‚ç‚¹ä¿¡æ¯ï¼Œå¯ä»¥çŸ¥é“èŠ‚ç‚¹æœ€åçš„é¡ºåºåº”è¯¥ä¸º<code>node2-&gt;node5-&gt;node4-&gt;node3-&gt;node6-&gt;node1</code>ã€‚æ‰€ä»¥ç»ç¬¬äº”æ­¥å¤„ç†åçš„å‚æ•°åº”è¯¥ä¸º<code>2 5 4 3 6 1</code>ã€‚å³æœ€åˆè¾“å…¥çš„å‚æ•°åº”è¯¥ä¸º<code>5 2 3 4 1 6</code>ã€‚</p>
</li>
</ol>
<hr>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªä½œä¸šå¹¶ä¸ç®—éš¾ï¼Œç¨‹åºç”¨åˆ°çš„éƒ½æ˜¯æœ€åŸºæœ¬çš„é€»è¾‘å’Œè®¡ç®—ã€‚ä½†æ˜¯æƒ³è¦é¡ºåˆ©çš„è§£å‡ºç­”æ¡ˆï¼Œé™¤äº†è¦å¯¹<strong>GDB</strong>çš„æ“ä½œå’Œå‘½ä»¤ç†Ÿç»ƒå¤–ï¼Œè¿˜è¦å¯¹ç¨‹åºçš„åŸºæœ¬è¿è¡ŒåŸç†å’Œç›¸å…³æ±‡ç¼–æŒ‡ä»¤æœ‰ä¸€å®šç¨‹åº¦çš„æŒæ¡ã€‚</p>
<p>æˆ‘è®¤ä¸ºè¿™å…­ä¸ªPhaseä¸­å”¯ä¸€æ£˜æ‰‹çš„å°±æ˜¯æœ€åä¸€ä¸ªäº†ï¼Œå‡ ä¹å…¨æ˜¯å¾ªç¯é€»è¾‘ï¼Œç”šè‡³æ˜¯åŒé‡å¾ªç¯ï¼Œå¯¹è¿™ç§é€»è¾‘çš„å¤„ç†æ²¡å¤ªå¤šç»éªŒçš„è¯å¾ˆå®¹æ˜“æœ›è€Œå´æ­¥ï¼Œå“ªæ€•æ˜¯ç¡¬ç€å¤´çš®ä¸Šï¼Œä¹Ÿä¼šèº«å¿ƒä¿±ç–²ã€‚ä½†æ€»ä¹‹ï¼Œç¨‹åºçš„è¿è¡Œé€»è¾‘æ— éå°±è¿™å‡ ç§ï¼šé¡ºåºã€åˆ†æ”¯ã€å¾ªç¯ã€‚åŸºæœ¬é€»è¾‘æå®šäº†ï¼Œåˆ†æè§£å†³å†å¤§çš„ç¨‹åºä¹Ÿä¸è¿‡æ˜¯æ—¶é—´é—®é¢˜ã€‚</p>
<p>å½“ç„¶ï¼Œæ¯ä¸ªé—®é¢˜é€šå¸¸éƒ½ä¸ä¼šåªæœ‰ä¸€ç§è§£æ³•ï¼Œæ¯”å¦‚<strong>phase_4</strong>å°±å¯ä»¥é…åˆæš´åŠ›æšä¸¾æ‰¾å‡ºç­”æ¡ˆï¼ŒèŠ‚çœå¤§é‡æ—¶é—´ã€‚çµæ´»çš„è¿ç”¨å·¥å…·ï¼Œå–„äºæ€è€ƒï¼Œå°è¯•ç”¨ä¸åŒçš„è§’åº¦å»å®¡è§†å’Œè§£å†³éš¾é¢˜ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬æ€ç»´æ›´åŠ å¼€é˜”ã€‚</p>
<p>è¿™ç¯‡åšå®¢ç®—æ˜¯æˆ‘ç¬¬ä¸€ç¯‡æŠ€æœ¯é•¿ç¯‡ï¼Œæˆ–è®¸è¿˜æœ‰è®¸å¤šè¡¨è¿°ä¸å‘¨çš„åœ°æ–¹ã€‚æ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®ºï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ è¿›æ­¥ï¼ŒåŠªåŠ›å˜å¼ºï¼</p>
]]></content>
      <categories>
        <category>CS:APP2e Lab Assignments</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>GDB</tag>
        <tag>Binarybomb</tag>
        <tag>C/Cpp</tag>
        <tag>Debug</tag>
        <tag>Reverse</tag>
        <tag>CTF</tag>
        <tag>Assembly</tag>
        <tag>Arch</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Qemuæ›¿ä»£VirtualBoxå¹¶è¿›è¡Œç›¸å…³é…ç½®</title>
    <url>/2022/05/29/replace-vbox-with-qemu/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ä½¿ç”¨äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼ˆå¤§æ¦‚6-7ä¸ªæœˆï¼‰çš„VirtualBoxä¹‹åï¼Œæˆ‘å†³å®šä½¿ç”¨Qemuæ›¿ä»£å®ƒã€‚äº‹å®ä¸Šæˆ‘ä½¿ç”¨VirtualBoxçš„ä½“éªŒéå¸¸å¥½ï¼Œå°¤å…¶æ˜¯å®ƒæä¾›çš„Hostå’ŒGuestä¹‹é—´çš„æ–‡ä»¶ä¼ è¾“ï¼Œå‰ªåˆ‡æ¿å…±äº«åŠŸèƒ½ï¼Œå®ƒå¯¹äºç½‘ç»œçš„é…ç½®ä¹Ÿéå¸¸çš„æ–¹ä¾¿ã€‚ä½†å¯¹äºä¸€äº›å¤æ‚ç‚¹çš„ç½‘ç»œé…ç½®åˆ™éœ€è¦ç”¨åˆ°å‘½ä»¤è¡Œå·¥å…·<code>vboxmanage</code>ï¼Œæ¯”å¦‚å¯ç”¨è™šæ‹Ÿç½‘å¡çš„dhcpæœåŠ¡ã€‚è€Œè®©æˆ‘æ¯…ç„¶å†³å®šæ”¾å¼ƒVirtualBoxé€‰æ‹©Qemuçš„åŸå› æ˜¯æˆ‘åœ¨æ²¹ç®¡ä¸Šçœ‹åˆ°çš„ä¸€åˆ™å‘è¡¨äº2022å¹´1æœˆè§†é¢‘ï¼š<a href="https://www.youtube.com/watch?v=Kq849CpGd88">Stop using Virtualbox, Hereâ€™s how to use QEMU instead</a></p>
<p>æ²¹ç®¡åšä¸»<em>Chris Titus</em>åœ¨è§†é¢‘é‡Œå±•ç¤ºäº†ç›¸åŒçš„è™šæ‹ŸæœºGueståœ¨Qemuä¸‹å’Œåœ¨VirtualBoxä¸‹çš„å¯åŠ¨æ—¶é—´ï¼Œç»“è®ºæ˜¯<code>11.17s</code>æ¯”<code>35.28s</code>ï¼æˆ‘å½“æ—¶å°±éœ‡æ’¼äº†ã€‚å¦‚æœè¯´åªæ˜¯å¿«ä¸ªç™¾åˆ†ä¹‹äºŒä¸‰åï¼Œæˆ‘è¿˜å¯ä»¥è®¤ä¸ºåªæ˜¯ç®€å•çš„å› ä¸ºVirtualBoxæä¾›äº†æ›´å¤šçš„ç®¡ç†åŠŸèƒ½è€Œå¯¼è‡´çš„æ€§èƒ½ä¸‹é™ï¼Œä½†äº‹å®æ‘†åœ¨æˆ‘é¢å‰ï¼Œé€Ÿåº¦æå‡<code>68.3%</code>ï¼è¿™æ˜¯ä»€ä¹ˆæ¦‚å¿µï¼Œè¦çŸ¥é“å®é™…æ€§èƒ½çš„æå‡å’Œå¯åŠ¨é€Ÿåº¦çš„æå‡å¹¶ä¸æ˜¯æˆæ­£æ¯”çš„ï¼Œé€šå¸¸æ¥è¯´å®é™…æ€§èƒ½çš„æå‡çš„æ¯”ä¾‹ä¼šé«˜äºå¯åŠ¨é€Ÿåº¦çš„æå‡æ¯”ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨Qemuçš„è™šæ‹Ÿæœºæ€§èƒ½æ•ˆæœæ¯”VirtualBoxçš„è™šæ‹Ÿæœºæ€§èƒ½æ•ˆæœæå‡è¶…è¿‡ä¸€å€ç”šè‡³æ›´å¤šã€‚è¿™è®©æˆ‘æ²¡æœ‰ç†ç”±ä¸é€‰æ‹©ä½¿ç”¨Qemuã€‚</p>
<hr>
<h2 id="å®é™…ä½¿ç”¨"><a href="#å®é™…ä½¿ç”¨" class="headerlink" title="å®é™…ä½¿ç”¨"></a>å®é™…ä½¿ç”¨</h2><p>Qemuæœ¬èº«åªæä¾›äº†å‘½ä»¤è¡Œå·¥å…·æ¥ç®¡ç†è™šæ‹Ÿæœºï¼Œä¹Ÿä¸ä¼šä¿å­˜è™šæ‹Ÿæœºçš„ç›¸å…³é…ç½®ä¿¡æ¯ã€‚å®é™…ä½¿ç”¨æ—¶é€šå¸¸æ˜¯åŒæ—¶å®‰è£…<code>Libvert</code>ï¼ˆä¸€å¥—ç”¨äºç®¡ç†ç¡¬ä»¶è™šæ‹ŸåŒ–çš„å¼€æºAPIã€å®ˆæŠ¤è¿›ç¨‹ä¸ç®¡ç†å·¥å…·ï¼‰é…åˆ<code>Libvert clients</code>æ¥å®ç°ä½¿ç”¨å›¾å½¢ç•Œé¢ç®¡ç†Qemuè™šæ‹Ÿæœºã€‚</p>
<p><code>Libvert clients</code>æ˜¯<code>Libvert</code>çš„å‰ç«¯ï¼Œå¸¸ç”¨çš„<code>Libvert clients</code>åœ¨<a href="https://wiki.archlinux.org/title/Libvirt#Client">è¿™é‡Œ</a>ã€‚æˆ‘ä½¿ç”¨çš„æ˜¯Virt-Manageræ¥ç®¡ç†Qemuè™šæ‹Ÿæœºï¼Œå› ä¸ºåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­Virt-Manageræä¾›çš„ç®¡ç†åŠŸèƒ½å’ŒVirtualBoxæ¯”è¾ƒæ¥è¿‘ã€‚ä½¿ç”¨æ•™ç¨‹å‚è€ƒ<em>Derek Taylor</em>çš„<a href="https://www.youtube.com/watch?v=p1d_b_91YlU">Virt-Manager Is The Better Way To Manage VMs</a>ã€‚</p>
<p>ä½¿ç”¨Virt-Manageråˆ›å»ºè™šæ‹Ÿæœºçš„è¿‡ç¨‹å’ŒVirtualBoxç±»ä¼¼ï¼Œé€šå¸¸ï¼ˆå¯¹æˆ‘æ¥è¯´ï¼‰åªéœ€è¦æ”¹ä¸€ä¸‹å†…å­˜å¤§å°ã€CPUæ•°é‡å’Œç£ç›˜å®¹é‡ï¼Œå…¶å®ƒæ— è„‘ä¸‹ä¸€æ­¥å°±è¡Œã€‚ä¸VirtualBoxä¸åŒçš„æ˜¯Virt-Managerè¿˜æä¾›äº†é€šè¿‡ç½‘ç»œå®‰è£…ï¼ˆHTTP, HTTPS or FTPï¼‰ï¼Œå®‰è£…è¿‡ç¨‹è¦æä¾›æ“ä½œç³»ç»Ÿå®‰è£…URLï¼Œä¼°è®¡è¿›è¡Œå¤§è§„æ¨¡å®‰è£…çš„æ—¶å€™ä¼šç”¨åˆ°ï¼Œä¸€èˆ¬æ¥è¯´è¿˜æ˜¯ä½¿ç”¨é•œåƒæ–‡ä»¶æ¥å®‰è£…ã€‚</p>
<hr>
<h2 id="è¿è¡Œæ•ˆæœ"><a href="#è¿è¡Œæ•ˆæœ" class="headerlink" title="è¿è¡Œæ•ˆæœ"></a>è¿è¡Œæ•ˆæœ</h2><p>ä¸å¾—ä¸æ‰¿è®¤ï¼ŒQemuè™šæ‹Ÿæœºçš„å¯åŠ¨é€Ÿåº¦æ˜¯è‚‰çœ¼å¯è§çš„æå‡äº†ï¼Œå¯¹CPUçš„å ç”¨ä¹Ÿæ¯”VirtualBoxå°‘ï¼Œè‡³å°‘ä¸ä¼šåŠ¨ä¸åŠ¨å°±è®©CPUè¿›å…¥æš´èµ°çŠ¶æ€ï¼ˆWindowsèƒŒå¤§é”…ï¼‰ã€‚é™¤äº†æ²¡æœ‰å‰ªåˆ‡æ¿å…±äº«åŠŸèƒ½æœ‰ç‚¹ä¸æ–¹ä¾¿ä¹‹å¤–ï¼Œå…¶å®ƒä½¿ç”¨ä½“éªŒå’ŒVirtualBoxåŸºæœ¬ä¸€è‡´ã€‚</p>
<p>æˆ‘ä¸»è¦ä½¿ç”¨è™šæ‹Ÿæœºæ¥è°ƒè¯•ä¸€äº›åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚åœ¨Windowsä¸Šè¿è¡ŒIDAï¼Œåœ¨Linuxä¸Šè¿è¡ŒGDBã€‚å¦å¤–ä¹Ÿä¼šåœ¨Linuxä¸Šè¿è¡Œäº›æœ‰æ„æ€çš„Githubé¡¹ç›®å•¥çš„ï¼Œæ¯”å¦‚QQ botã€‚</p>
<p>é¡ºä¾¿æä¸€å˜´æ–‡ä»¶å…±äº«çš„é—®é¢˜ã€‚æˆ‘ä¸å–œæ¬¢ä½¿ç”¨è™šæ‹Ÿæœºè½¯ä»¶æä¾›çš„æ–‡ä»¶å…±äº«æœåŠ¡ï¼Œä¸€ä¸ªæ˜¯éº»çƒ¦ï¼Œæœ‰æ—¶è¿˜å¾—é‡å¯é…ç½®æ‰èƒ½ç”Ÿæ•ˆï¼›å¦ä¸€ä¸ªæ˜¯ä¸çµæ´»ï¼Œä¸æ–¹ä¾¿é…ç½®å¤šä¸ªå…±äº«æ–‡ä»¶å¤¹å’Œæ§åˆ¶æƒé™ã€‚æˆ‘ä½¿ç”¨ç½‘ç»œæ¥å®ç°æ–‡ä»¶å…±äº«ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å› ä¸ºå¯¹è¿™æ–¹é¢æ¯”è¾ƒç†Ÿã€‚å¯¹äºWindowsè™šæ‹Ÿæœºï¼Œåªè¦å¼€å¯ç½‘ç»œæ–‡ä»¶å…±äº«ï¼Œç„¶åæŠŠæƒ³è¦å…±äº«çš„æ–‡ä»¶å¤¹è®¾ç½®ä¸ºå¯¹æŒ‡å®šç”¨æˆ·å…±äº«ï¼Œå°±å¯ä»¥åœ¨ä¸»æœºï¼ˆæˆ‘è¿™é‡Œç”¨çš„Linuxï¼ŒWindowsç±»ä¼¼ï¼‰ä½¿ç”¨<code>smb</code>åè®®è¿ä¸ŠWindowsè™šæ‹Ÿæœºï¼Œè®¿é—®å…±äº«æ–‡ä»¶ã€‚å¯¹äºLinuxè™šæ‹Ÿæœºå°±æ›´ç®€å•äº†ï¼Œç›´æ¥åœ¨Linuxè™šæ‹Ÿæœºé‡Œå¼€å¯<code>SSHD/SSH</code>æœåŠ¡ï¼Œä½¿ç”¨<code>SSHFS</code>æŒ‚è½½Linuxçš„æ–‡ä»¶ç³»ç»Ÿæˆ–è€…ç›´æ¥<code>SCP</code>ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯ä½¿ç”¨<strong>VS Code</strong>çš„è¿œç¨‹è¿æ¥æ¥ç›´æ¥ç¼–è¾‘Linuxè™šæ‹Ÿæœºé‡Œçš„æ–‡ä»¶ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨Qemuä¸‹æ›´åŠ æ–¹ä¾¿ï¼Œå› ä¸ºQemuç›´æ¥è™šæ‹Ÿå‡ºä¸€ä¸ªä¸»æœºå±‚é¢çš„è™šæ‹Ÿç½‘å¡ï¼Œä¹Ÿå°±ä¸éœ€è¦åƒVirtualBoxé‚£æ ·ä½¿ç”¨<code>NAT</code>æ—¶è¿˜å¾—é…ç½®ç«¯å£è½¬å‘æ‰èƒ½ä»ä¸»æœºè¿ä¸Šè™šæ‹Ÿæœºäº†ã€‚</p>
<hr>
<h2 id="å®é™…ä½¿ç”¨ä¸­çš„é—®é¢˜"><a href="#å®é™…ä½¿ç”¨ä¸­çš„é—®é¢˜" class="headerlink" title="å®é™…ä½¿ç”¨ä¸­çš„é—®é¢˜"></a>å®é™…ä½¿ç”¨ä¸­çš„é—®é¢˜</h2><p>ä½¿ç”¨Dockerå’Œéƒ¨ç½²Githubé¡¹ç›®å°±ä¸å¾—ä¸è€ƒè™‘é…ç½®ä»£ç†çš„é—®é¢˜ã€‚å› ä¸ºæˆ‘åœ¨ä¸»æœºä½¿ç”¨çš„æ˜¯<em>é€æ˜ä»£ç†</em>ï¼Œæ‰€ä»¥åœ¨VirtualBoxè™šæ‹Ÿæœºé‡Œå°±ä¸éœ€è¦è€ƒè™‘é…ç½®ç½‘ç»œä»£ç†çš„é—®é¢˜ï¼Œç½‘ç»œæ•°æ®è‡ªåŠ¨ç”±ä¸»æœºä»£ç†æ¥ç®¡ã€‚è€ŒQemuè™šæ‹Ÿçš„æ˜¯ä¸»æœºå±‚é¢çš„ç½‘å¡ï¼Œå¯¼è‡´å®ƒçš„ç½‘ç»œæ•°æ®ä¸ç”±<em>é€æ˜ä»£ç†</em>æ¥ç®¡ã€‚ï¼ˆä¹Ÿå¯èƒ½æ˜¯<code>iptables</code>é…ç½®çš„é—®é¢˜ï¼Œåæ­£æˆ‘å¼„äº†å¥½ä¹…ä¹Ÿæ²¡ææ¸…æ¥šæ˜¯ä»€ä¹ˆåŸå› åœ¨å¼€äº†<code>cgproxy</code>åQemuè™šæ‹Ÿæœºå°±è¿ä¸ä¸Šç½‘ï¼Œä¼¼ä¹å¯ä»¥å¯¹å¤–è¯·æ±‚ï¼Œä½†è¿”å›çš„æ•°æ®åŒ…æ²¡èƒ½å›åˆ°è™šæ‹Ÿæœºï¼‰</p>
<p>ä¸ºäº†è®©è™šæ‹Ÿæœºæµé‡èµ°ä¸»æœºä»£ç†ï¼Œå°±åªèƒ½æ˜¯ä½¿ç”¨é…ç½®<code>http_proxy</code>å’Œ<code>https_proxy</code>ç¯å¢ƒå˜é‡æ¥è¯•å›¾è®©æµé‡èµ°ä¸»æœºä»£ç†äº†ï¼Œä½†å¾ˆå¤šåº”ç”¨å´å¹¶ä¸ä½¿ç”¨<code>http_proxy</code>å’Œ<code>https_proxy</code>ç¯å¢ƒå˜é‡ï¼Œæè‡ªå·±çš„ä»£ç†é…ç½®é‚£ä¸€å¥—ã€‚å…¶ä¸­å°±åŒ…æ‹¬<code>apt</code>ã€<code>docker</code>å’ŒPythonè„šæœ¬ã€‚å¥½åœ¨æ‰¾åˆ°äº†ä¸€ç¯‡æ¯”è¾ƒå…¨çš„ä»£ç†é…ç½®åšæ–‡ï¼š<a href="https://qiita.com/daichi-ishida/items/b77c151067427806ede5">Ubuntuã®Proxyè¨­å®šå‚™å¿˜éŒ²</a>ã€‚é‡Œé¢åŒ…å«äº†å¯¹<code>http_proxy</code>å’Œ<code>https_proxy</code>ç¯å¢ƒå˜é‡ã€<code>apt</code>ã€<code>git</code>ã€<code>docker</code>å’Œ<code>wget</code>çš„ä»£ç†é…ç½®æ–¹æ³•ã€‚å…³äºPythonçš„ä»£ç†é…ç½®æˆ‘å‚è€ƒçš„æ˜¯Stack Overflowä¸­çš„<a href="https://stackoverflow.com/questions/31639742/how-to-pass-all-pythons-traffics-through-a-http-proxy">How to pass all Pythonâ€™s traffics through a http proxy?</a></p>
<hr>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å½“éœ€è¦è€ƒè™‘è™šæ‹Ÿæœºæ€§èƒ½æ—¶ï¼Œæ¯«æ— ç–‘é—®åº”è¯¥é€‰æ‹©Qemu&#x2F;KVMã€‚è¿™ä¹Ÿæ˜¯ç°åœ¨è®¸å¤šäº‘æœåŠ¡å‚å•†ä½¿ç”¨çš„è™šæ‹Ÿæ–¹æ¡ˆã€‚ä½†å¦‚æœåªæ˜¯ç®€å•çš„è™šæ‹Ÿéœ€æ±‚å¦‚å°è¯•å„ç§Linuxå‘è¡Œç‰ˆå•¥çš„ï¼Œé‚£é€‰æ‹©VirtualBoxè¿˜å¾ˆè¦æ›´æ–¹ä¾¿çš„ï¼Œæ¯•ç«ŸVirtualBoxå¯¹è™šæ‹Ÿæœºçš„ç®¡ç†é…ç½®å¾ˆå…¨ï¼ŒåŸºæœ¬ä¸Šæ™®é€šçš„éœ€æ±‚éƒ½å¯ä»¥åœ¨VirtualBoxçš„è®¾ç½®é¢æ¿åŠ¨åŠ¨é¼ æ ‡è§£å†³ï¼Œè¿™å¯¹æ–°æ‰‹éå¸¸å‹å¥½ã€‚</p>
<p>æŠ˜è…¾ç½‘ç»œé…ç½®è¯´å®è¯æŒºçƒ¦çš„ï¼Œå°¤å…¶æ˜¯æˆ‘è¿˜æ²¡æ·±å…¥ç ”ç©¶è¿‡<code>Netfilter</code>å’Œ<code>Iptables</code>ã€‚ä¸€äº›é…ç½®å‡ºé—®é¢˜è™½ç„¶çŸ¥é“å¤§æ¦‚æ˜¯å“ªæœ‰é—®é¢˜ï¼Œä½†å´ä¸ä¼šä¿®å¤&#x3D;-&#x3D;ã€‚ç½‘ä¸Šä¹Ÿä¸ä¸€å®šæ‰¾å¾—åˆ°ç­”æ¡ˆï¼Œåªèƒ½æ˜¯è®ºå›æ±‚åŠ©ã€‚ä½†æŠ˜è…¾çš„å¥½å¤„åˆ™æ˜¯æˆ‘å¯ä»¥åœ¨è§£å†³é—®é¢˜çš„è¿‡ç¨‹ä¸­å­¦åˆ°ä¸å°‘æ–°çš„ä¸œè¥¿ï¼Œè¿™äº›ç»éªŒä¼šåœ¨ä¸ç»æ„é—´å‘æŒ¥æ„æƒ³ä¸åˆ°çš„ä½œç”¨ã€‚</p>
]]></content>
      <categories>
        <category>æŠ˜è…¾åˆé›†</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Arch</tag>
        <tag>Virtualization</tag>
        <tag>tweak/toss</tag>
      </tags>
  </entry>
  <entry>
    <title>Welcome Orangeã®å°çª!!!</title>
    <url>/2022/04/12/firstpost/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><p>Welcome to <a href="https://orange.wastaken.xyz/">Orangeã®å°çª</a>!!!</p>
<p>This is my first blog in the site, mainly for testing and will be removed when the site is fully built.</p>
<p>If you are new here and like this blog site, feel free to fav the website and leave your opinions of the site below as comments, anyway, itâ€™s free, and you can always change your mind.</p>
<p>Enjoy the <a href="https://orange.wastaken.xyz/">Orangeã®å°çª</a>!!!</p>
]]></content>
      <tags>
        <tag>Greetings</tag>
      </tags>
  </entry>
</search>
